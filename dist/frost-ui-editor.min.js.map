{"version":3,"names":["getRange","selection","window","getSelection","rangeCount","getRangeAt","selectNode","node","range","$","createRange","selectRange","removeAllRanges","addRange","running","dragCount","editors","Set","Editor","BaseComponent","constructor","options","super","this","_options","buttons","fonts","filter","font","document","check","includes","defaultFont","slice","shift","_buttons","_history","_redoHistory","_render","html","getValue","_node","setHTML","_editor","setValue","_source","_focusEditor","_execCommand","_checkEmpty","_refreshToolbar","_events","_normalize","_updateValue","_refreshDisabled","add","addEvent","body","_","editor","_showDropTarget","_resetDropText","hide","_dropTarget","debounce","ancestor","commonAncestorContainer","isSame","hasDescendent","_lastRange","_refreshCursor","_removePopover","e","inputType","_observe","activeElement","at","blur","capture","_currentNode","is","_highlightImage","_refreshLineNumbers","triggerEvent","backColor","value","bold","disable","setAttribute","disabled","dispose","delete","size","removeEvent","_popper","_modal","Modal","init","remove","_fullScreen","_observer","disconnect","_container","show","removeAttribute","_toolbar","_editorBody","_editorContainer","_editorScroll","_imgHighlight","_imgCursor","_imgResize","_imgSize","_sourceOuter","_sourceContainer","_sourceScroll","_lineNumbers","_popover","_popoverArrow","_popoverBody","_dropText","_resizeBar","enable","fontName","fontSize","Object","keys","fontSizes","find","key","formatBlock","foreColor","indent","insertHorizontalRule","insertHTML","insertImage","src","img","create","attributes","newImg","_insertNode","image","Image","onload","maxWidth","width","boxSize","CONTENT_BOX","Math","min","setStyle","insertLink","href","text","newWindow","link","target","insertText","insertOrderedList","insertUnorderedList","italic","justifyCenter","justifyFull","justifyLeft","justifyRight","outdent","redo","length","current","pop","_addHistory","_restoreHistory","removeFormat","strikethrough","subscript","superscript","underline","undo","next","push","unlink","plugins","alignCenter","command","alignJustify","alignLeft","alignRight","color","setContent","queryCommandValue","span","class","classes","colorBtnContent","style","backgroundColor","getProperty","dropdown","_colorDropdown","replace","_fontDropdown","fontSizePx","css","parseFloat","round","_fontSizeDropdown","fullScreen","action","UI","_createModal","content","onShown","isVisible","focus","onHide","insertBefore","hr","_showImageModal","_showLinkModal","orderedList","disableCheck","paragraph","source","_showEditor","_showSource","_styleDropdown","queryCommandState","table","_tableDropdown","unorderedList","video","_showVideoModal","popovers","floatLeft","float","floatRight","floatNone","removeStyle","imageFull","imageHalf","imageQuarter","imageOriginal","imageRemove","detach","render","getAttribute","linkUrl","linkEdit","tableColumnAfter","_updateTable","td","index","rows","row","newTd","cells","children","after","tableColumnBefore","before","tableColumnRemove","tableRemove","closest","tableRowAfter","tr","columns","newTr","i","append","tableRowBefore","tableRowRemove","select","collapse","getNodeFromPath","path","container","contents","getPathToNode","parents","map","parent","indexOf","transparent","isPhrasingContent","_isText","isPhrasingContainer","isVoidElement","isFormElement","defaults","imageUpload","files","promises","file","Promise","resolve","reject","reader","FileReader","result","onerror","Error","readAsDataURL","allSettled","then","results","status","keyDown","ctrlKey","preventDefault","height","resizable","historyLimit","btn","btnGroup","btnIcon","checkbox","checkboxContainer","colorContainerRow","colorContainerColumn","colorDefaultBtn","colorLabel","colorLabelContainer","colorRow","dropdownButtons","dropdownGroup","dropdownItem","dropdownItemDisabled","dropdownToggle","dropHover","dropTarget","dropText","editorBody","editorContainer","editorDisabled","editorScroll","formError","formGroup","imgCursor","imgHighlight","imgResize","imgSize","input","inputContainer","inputRipple","invalidFeedback","modal","modalBody","modalBtnClose","modalBtnPrimary","modalBtnSecondary","modalContent","modalDialog","modalFooter","modalFullscreen","modalHeader","modalTitle","popover","popoverArrow","popoverBody","resizeBar","sourceContainer","sourceLines","sourceOuter","sourceScroll","styleContent","tableCell","tableDropdown","tableHover","tableInfo","tableLink","tableRow","toolbar","toolbarButtons","lang","drop","dropHere","dropdowns","colorBackground","colorDefault","colorForeground","colorTransparent","modals","cancel","close","imageFile","imageUrl","insertVideo","linkNewWindow","linkText","videoUrl","videoUrlInvalid","styles","p","blockquote","pre","h1","h2","h3","h4","h5","h6","colors","Black","Tundora","Gallery","Alabaster","White","Red","Yellow","Green","Cyan","Blue","Magenta","Azalea","Karry","Zanah","Botticelli","Mischka","Twilight","Sprout","Casper","Perano","Mandy","Rajah","Dandelion","Olivine","Viking","Puce","Cadillac","Sangria","Eden","Meteorite","Claret","Rosewood","Cinnamon","Olive","Parsley","Tiber","Valentino","Loulou","icons","_createCheckbox","group","id","type","label","for","_createFileInput","_createInput","ripple","tabindex","role","addClass","title","closeBtn","dataset","uiDismiss","onSubmit","cancelButton","cancelText","submitButton","submitText","onShow","onHidden","proto","prototype","selectionData","trim","col1","col2","foreLabel","backLabel","foreDefaultContainer","backDefaultContainer","foreDefault","_setToolbarData","backDefault","foreRow","backRow","colorName","entries","foreLink","Tooltip","appendTo","placement","backLink","minWidth","_eventsToolbar","_eventsEditor","_eventsPopover","_eventsSource","_eventsDrop","_eventsResize","addEventDelegate","setText","dataTransfer","bind","getData","code","getText","isCollapsed","anchorNode","focusNode","nodes","every","lastParent","nextParent","formatElement","tagName","stopPropagation","_refreshPopover","currentTarget","mutationHandler","MutationObserver","observeLevel","pendingMutations","observe","childList","subtree","takeRecords","getDataset","dragEvent","mouseDragFactory","imgRect","rect","offset","ratio","max","pageX","x","pageY","y","resizeOffset","barPosition","position","editorPosition","refreshLineNumbersDebounced","start","end","lines","split","startLine","substring","endLine","newValue","newStart","newEnd","shiftKey","line","startsWith","join","execCommand","setSelectionRange","scrollY","getScrollY","marginTop","sort","button","fontFamily","data","sizes","values","_getSelectionData","anchorOffset","focusOffset","anchorPath","focusPath","editorPos","scrollX","getScrollX","imgX","imgY","imgWidth","imgHeight","top","left","deleteContents","insertNode","normalize","markers","createText","rangeStart","cloneRange","rangeEnd","saveSelection","styleNodes","styleNode","getStyle","clone","deep","testValue","parentStyle","normalizeStyles","spans","normalizeSpans","elements","element","child","nextSiblings","splice","normalizePhrasing","isMarker","moveMarkers","nextSibling","isEqual","shallow","prepend","joinAdjacentNodes","isConnected","setStartAfter","setEndBefore","restoreSelection","baseNode","currentNode","opacity","removeClass","contenteditable","lineNumbers","test","padding","border","letterSpacing","whiteSpace","wordBreak","wordSpacing","wordWrap","lineNumber","event","reference","Popper","arrow","minContact","noAttributes","_renderPopoverItems","update","isDisabled","isSource","enabled","_removeModal","empty","_renderToolbar","_renderEditor","_renderSource","_renderPopover","_renderDrop","_renderResize","_renderButton","setTitle","parseHTML","icon","spellcheck","autocorrect","_renderPopoverItem","setDataset","uiAction","items","item","_isString","header","buttonGroup","_renderToolbarButton","_renderToolbarDropdown","dropdownContent","dropGroup","uiToggle","_isArray","dropdownItems","subDropGroup","_isFunction","setBaseAndExtent","selectAllChildren","collapseToEnd","uiCommand","uiValue","fileGroup","fileInput","generateId","accept","multiple","urlGroup","urlInput","originalRange","textGroup","textInput","newWindowGroup","newWindowInput","setProperty","checked","hasText","url","display","important","urlInvalidFeedback","match","frameborder","allowfullscreen","tag","toUpperCase","j","cell","uiColumn","uiRow","info","cols","tbody","br","getHTML","targetCol","targetRow","colMin","rowMin","links","col","callback","initComponent"],"sources":["../src/js/selection.js","../src/js/helpers.js","../src/js/editor.js","../src/js/icons.js","../src/js/plugins.js","../src/js/popovers.js","../src/js/prototype/history.js","../src/js/normalize.js","../src/js/index.js","../src/js/values.js","../src/js/static/modals.js","../src/js/prototype/helpers.js","../src/js/prototype/render-dropdowns.js","../src/js/prototype/events.js","../src/js/prototype/popovers.js","../src/js/prototype/nodes.js","../src/js/prototype/modals.js","../src/js/prototype/render.js","../src/js/prototype/render-popover.js","../src/js/prototype/render-toolbar.js"],"sourcesContent":["import $ from '@fr0st/query';\n\n/**\n * Get the current selected range.\n * @return {Range} The Range object.\n */\nexport function getRange() {\n    const selection = window.getSelection();\n\n    if (!selection.rangeCount) {\n        return null;\n    }\n\n    return selection.getRangeAt(0);\n};\n\n/**\n * Restore the selection from selection markers.\n * @param {object} markers The selection markers.\n */\nexport function restoreSelection({ start, end } = {}) {\n    if (!start && !end) {\n        return;\n    }\n\n    const range = $.createRange();\n\n    if (start && $.isConnected(start)) {\n        range.setStartAfter(start);\n        $.detach(start);\n    }\n\n    if (end && $.isConnected(end)) {\n        range.setEndBefore(end);\n        $.detach(end);\n    }\n\n    const selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n};\n\n/**\n * Save the selection and return the selection markers.\n * @return {object} The selection markers.\n */\nexport function saveSelection() {\n    const selection = window.getSelection();\n\n    let start;\n    let end;\n    if (selection.rangeCount) {\n        start = $.createText('');\n        end = $.createText('');\n\n        const range = selection.getRangeAt(0);\n        const rangeStart = range.cloneRange();\n        const rangeEnd = range.cloneRange();\n\n        rangeStart.collapse(true);\n        rangeEnd.collapse(false);\n\n        rangeStart.insertNode(start);\n        rangeEnd.insertNode(end);\n    }\n\n    return { start, end };\n};\n\n/**\n * Select a node.\n * @param {HTMLElement} node The element to select.\n * @return {Range} The Range object.\n */\nexport function selectNode(node) {\n    const range = $.createRange();\n    range.selectNode(node);\n\n    selectRange(range);\n\n    return range;\n};\n\n/**\n * Select a range.\n * @param {Range} range The range to select.\n */\nexport function selectRange(range) {\n    if (!range) {\n        return;\n    }\n\n    const selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n};\n","import $ from '@fr0st/query';\nimport { getRange } from './selection.js';\n\nlet running = false;\nlet dragCount = 0;\nconst editors = new Set();\n\n/**\n* Add an Editor.\n* @param {Editor} editor The editor to add.\n*/\nexport function addEditor(editor) {\n    editors.add(editor);\n\n    if (running) {\n        return;\n    }\n\n    dragCount = 0;\n\n    $.addEvent(document.body, 'dragenter.ui.editor', (_) => {\n        if (dragCount === 0) {\n            for (const editor of editors) {\n                editor._showDropTarget();\n            }\n        }\n\n        dragCount++;\n    });\n\n    $.addEvent(document.body, 'dragleave.ui.editor', (_) => {\n        dragCount--;\n\n        if (dragCount === 0) {\n            for (const editor of editors) {\n                editor._resetDropText();\n                $.hide(editor._dropTarget);\n            }\n        }\n    });\n\n    $.addEvent(document.body, 'dragend.ui.editor drop.ui.editor', (_) => {\n        dragCount = 0;\n    });\n\n    $.addEvent(document, 'selectionchange.ui.editor', $.debounce(() => {\n        const range = getRange();\n\n        if (!range) {\n            return;\n        }\n\n        const ancestor = range.commonAncestorContainer;\n\n        for (const editor of editors) {\n            if (!$.isSame(editor._editor, ancestor) && !$.hasDescendent(editor._editor, ancestor)) {\n                editor._removePopover();\n                continue;\n            }\n\n            editor._lastRange = range;\n            editor._refreshCursor();\n            editor._refreshToolbar();\n        }\n    }));\n\n    $.addEvent(document, 'beforeinput.ui.editor', (e) => {\n        switch (e.inputType) {\n            case 'historyUndo':\n            case 'historyRedo':\n                break;\n            default:\n                return;\n        }\n\n        for (const editor of editors) {\n            editor._observe(false);\n        }\n    });\n\n    $.addEvent(document, 'input.ui.editor', (e) => {\n        switch (e.inputType) {\n            case 'historyUndo':\n            case 'historyRedo':\n                break;\n            default:\n                return;\n        }\n\n        for (const editor of editors) {\n            if ($.isSame(editor._editor, document.activeElement)) {\n                const { html } = editor._history.at(-1);\n\n                $.setHTML(editor._editor, html);\n                $.blur(editor._editor);\n            }\n\n            editor._observe();\n        }\n    }, { capture: true });\n\n    $.addEvent(window, 'click.ui.editor', (_) => {\n        for (const editor of editors) {\n            editor._removePopover();\n        }\n    });\n\n    $.addEvent(window, 'resize.ui.editor', $.debounce((_) => {\n        for (const editor of editors) {\n            if (editor._currentNode && $.is(editor._currentNode, 'img')) {\n                editor._highlightImage(editor._currentNode);\n            }\n\n            editor._refreshLineNumbers();\n        }\n    }));\n\n    running = true;\n};\n\n/**\n * Remove a Editor.\n * @param {Editor} editor The editor to remove.\n */\nexport function removeEditor(editor) {\n    editors.delete(editor);\n\n    if (editors.size) {\n        return;\n    }\n\n    $.removeEvent(document.body, 'dragenter.ui.editor');\n    $.removeEvent(document.body, 'dragleave.ui.editor');\n    $.removeEvent(document.body, 'dragend.ui.editor');\n    $.removeEvent(document, 'selectionchange.ui.editor');\n    $.removeEvent(document, 'beforeinput.ui.editor');\n    $.removeEvent(document, 'input.ui.editor');\n    $.removeEvent(window, 'click.ui.editor');\n    $.removeEvent(window, 'resize.ui.editor');\n\n    running = false;\n};\n\n/**\n * Reset the drag count.\n */\nexport function resetDragCount() {\n    dragCount = 0;\n};\n","import $ from '@fr0st/query';\nimport { BaseComponent, Modal } from '@fr0st/ui';\nimport { addEditor, removeEditor } from './helpers.js';\nimport { getRange, selectRange } from './selection.js';\n\n/**\n * Editor\n * @class\n */\nexport default class Editor extends BaseComponent {\n    /**\n     * New Editor constructor.\n     * @param {HTMLElement} node The input node.\n     * @param {object} [options] The options to create the Editor with.\n     */\n    constructor(node, options) {\n        super(node, options);\n\n        if (!this._options.buttons) {\n            this._options.buttons = this.constructor.buttons;\n        }\n\n        if (!this._options.fonts) {\n            this._options.fonts = this.constructor.fonts;\n        }\n\n        this._options.fonts = this._options.fonts.filter((font) => document.fonts.check(`12px ${font}`));\n\n        if (!this._options.fonts.includes(this._options.defaultFont)) {\n            this._options.defaultFont = this._options.fonts.slice().shift();\n        }\n\n        this._buttons = [];\n        this._history = [];\n        this._redoHistory = [];\n\n        this._render();\n\n        const html = $.getValue(this._node);\n        $.setHTML(this._editor, html);\n        $.setValue(this._source, html);\n\n        const range = getRange();\n\n        this._focusEditor();\n        this._execCommand('defaultParagraphSeparator', 'p');\n        this._checkEmpty();\n        this._refreshToolbar();\n\n        selectRange(range);\n\n        this._events();\n        this._normalize();\n        this._updateValue();\n        this._refreshDisabled();\n\n        addEditor(this);\n\n        $.triggerEvent(this._node, 'init.ui.editor');\n    }\n\n    /**\n     * Set the background color.\n     * @param {string} value The background color.\n     */\n    backColor(value) {\n        this._execCommand('backColor', value);\n    }\n\n    /**\n     * Toggle bold state.\n     */\n    bold() {\n        this._execCommand('bold');\n    }\n\n    /**\n     * Disable the Editor.\n     */\n    disable() {\n        $.setAttribute(this._node, { disabled: true });\n        this._refreshDisabled();\n        this._refreshToolbar();\n    }\n\n    /**\n     * Dispose the Editor.\n     */\n    dispose() {\n        removeEditor(this);\n\n        if (this._popper) {\n            this._popper.dispose();\n            this._popper = null;\n        }\n\n        if (this._modal) {\n            Modal.init(this._modal).dispose();\n            $.remove(this._modal);\n            this._modal = null;\n        }\n\n        if (this._fullScreen) {\n            Modal.init(this._fullScreen).dispose();\n            $.remove(this._fullScreen);\n            this._fullScreen = null;\n        }\n\n        this._observer.disconnect();\n        this._observer = null;\n        this._observe = null;\n\n        $.remove(this._container);\n        $.show(this._node);\n        $.removeAttribute(this._node, 'tabindex');\n\n        this._buttons = null;\n\n        this._container = null;\n        this._toolbar = null;\n        this._editorBody = null;\n        this._editorContainer = null;\n        this._editorScroll = null;\n        this._editor = null;\n        this._imgHighlight = null;\n        this._imgCursor = null;\n        this._imgResize = null;\n        this._imgSize = null;\n        this._sourceOuter = null;\n        this._sourceContainer = null;\n        this._sourceScroll = null;\n        this._lineNumbers = null;\n        this._source = null;\n        this._popover = null;\n        this._popoverArrow = null;\n        this._popoverBody = null;\n        this._dropTarget = null;\n        this._dropText = null;\n        this._resizeBar = null;\n        this._currentNode = null;\n        this._lastRange = null;\n        this._history = null;\n        this._redoHistory = null;\n\n        super.dispose();\n    }\n\n    /**\n     * Enable the Editor.\n     */\n    enable() {\n        $.removeAttribute(this._node, 'disabled');\n        this._refreshDisabled();\n        this._refreshToolbar();\n    }\n\n    /**\n     * Set the font family.\n     * @param {string} value The font family.\n     */\n    fontName(value) {\n        this._execCommand('fontName', value);\n    }\n\n    /**\n     * Set the font size.\n     * @param {string} value The font size.\n     */\n    fontSize(value) {\n        value = Object.keys(this.constructor.fontSizes)\n            .find((key) => this.constructor.fontSizes[key] === value);\n\n        this._execCommand('fontSize', value);\n    }\n\n    /**\n     * Format the selected block level element.\n     * @param {string} value The tag name.\n     */\n    formatBlock(value) {\n        this._execCommand('formatBlock', value);\n    }\n\n    /**\n     * Set the foreground color.\n     * @param {string} value The foreground color.\n     */\n    foreColor(value) {\n        this._execCommand('foreColor', value);\n    }\n\n    /**\n     * Indent the selection.\n     */\n    indent() {\n        this._execCommand('indent');\n    }\n\n    /**\n     * Insert a horizontal rule.\n     */\n    insertHorizontalRule() {\n        this._execCommand('insertHorizontalRule');\n    }\n\n    /**\n     * Insert a HTML string.\n     * @param {string} value The HTML string.\n     */\n    insertHTML(value) {\n        this._execCommand('insertHTML', value);\n    }\n\n    /**\n     * Insert an image.\n     * @param {string} src The image src.\n     */\n    insertImage(src) {\n        const img = $.create('img', {\n            attributes: { src },\n        });\n\n        const newImg = this._insertNode(img);\n\n        const image = new Image;\n        image.onload = (_) => {\n            const maxWidth = $.width(this._editor, { boxSize: $.CONTENT_BOX });\n            const width = Math.min(image.width, maxWidth);\n            $.setStyle(newImg, 'width', `${width}px`);\n        };\n\n        image.src = src;\n    }\n\n    /**\n     * Insert a link.\n     * @param {string} href The link href.\n     * @param {string} text The link text.\n     * @param {Boolean} [newWindow] Whether to open the link in a new window.\n     */\n    insertLink(href, text, newWindow) {\n        const link = $.create('a', {\n            text,\n            attributes: {\n                href,\n            },\n        });\n\n        if (newWindow) {\n            $.setAttribute(link, { target: '_blank' });\n        }\n\n        this._insertNode(link);\n    }\n\n    /**\n     * Insert a text string.\n     * @param {string} value The text.\n     */\n    insertText(value) {\n        this._execCommand('insertText', value);\n    }\n\n    /**\n     * Create an ordered list for the selection.\n     */\n    insertOrderedList() {\n        this._execCommand('insertOrderedList');\n    }\n\n    /**\n     * Create an unordered list for the selection.\n     */\n    insertUnorderedList() {\n        this._execCommand('insertUnorderedList');\n    }\n\n    /**\n     * Toggle italic state.\n     */\n    italic() {\n        this._execCommand('italic');\n    }\n\n    /**\n     * Center the selection.\n     */\n    justifyCenter() {\n        this._execCommand('justifyCenter');\n    }\n\n    /**\n     * Justify the selection.\n     */\n    justifyFull() {\n        this._execCommand('justifyFull');\n    }\n\n    /**\n     * Align the selection to the left.\n     */\n    justifyLeft() {\n        this._execCommand('justifyLeft');\n    }\n\n    /**\n     * Align the selection to the right.\n     */\n    justifyRight() {\n        this._execCommand('justifyRight');\n    }\n\n    /**\n     * Outdent the selection.\n     */\n    outdent() {\n        this._execCommand('outdent');\n    }\n\n    /**\n     * Perform a redo.\n     */\n    redo() {\n        if (!this._redoHistory.length) {\n            return;\n        }\n\n        const current = this._redoHistory.pop();\n\n        this._addHistory(current);\n        this._restoreHistory(current);\n    }\n\n    /**\n     * Remove all formatting from the selection.\n     */\n    removeFormat() {\n        this._execCommand('removeFormat');\n    }\n\n    /**\n     * Toggle strikethrough state.\n     */\n    strikethrough() {\n        this._execCommand('strikethrough');\n    }\n\n    /**\n     * Toggle subscript state.\n     */\n    subscript() {\n        this._execCommand('subscript');\n    }\n\n    /**\n     * Toggle superscript state.\n     */\n    superscript() {\n        this._execCommand('superscript');\n    }\n\n    /**\n     * Toggle underline state.\n     */\n    underline() {\n        this._execCommand('underline');\n    }\n\n    /**\n     * Perform an undo.\n     */\n    undo() {\n        if (this._history.length <= 1) {\n            return;\n        }\n\n        const next = this._history.pop();\n        this._redoHistory.push(next);\n\n        const current = this._history.at(-1);\n\n        this._restoreHistory(current);\n    }\n\n    /**\n     * Remove the selected anchor element.\n     */\n    unlink() {\n        this._execCommand('unlink');\n    }\n}\n","export default {\n    alignCenter: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M3 3h18v2H3V3m4 4h10v2H7V7m-4 4h18v2H3v-2m4 4h10v2H7v-2m-4 4h18v2H3v-2z\" fill=\"currentColor\"/></svg>',\n    alignJustify: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M3 3h18v2H3V3m0 4h18v2H3V7m0 4h18v2H3v-2m0 4h18v2H3v-2m0 4h18v2H3v-2z\" fill=\"currentColor\"/></svg>',\n    alignLeft: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M3 3h18v2H3V3m0 4h12v2H3V7m0 4h18v2H3v-2m0 4h12v2H3v-2m0 4h18v2H3v-2z\" fill=\"currentColor\"/></svg>',\n    alignRight: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M3 3h18v2H3V3m6 4h12v2H9V7m-6 4h18v2H3v-2m6 4h12v2H9v-2m-6 4h18v2H3v-2z\" fill=\"currentColor\"/></svg>',\n    bold: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M13.5 15.5H10v-3h3.5A1.5 1.5 0 0 1 15 14a1.5 1.5 0 0 1-1.5 1.5m-3.5-9h3A1.5 1.5 0 0 1 14.5 8A1.5 1.5 0 0 1 13 9.5h-3m5.6 1.29c.97-.68 1.65-1.79 1.65-2.79c0-2.26-1.75-4-4-4H7v14h7.04c2.1 0 3.71-1.7 3.71-3.79c0-1.52-.86-2.82-2.15-3.42z\" fill=\"currentColor\"/></svg>',\n    floatLeft: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M3 7h6v6H3V7m0-4h18v2H3V3m18 4v2H11V7h10m0 4v2H11v-2h10M3 15h14v2H3v-2m0 4h18v2H3v-2z\" fill=\"currentColor\"/></svg>',\n    floatNone: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M3 7h6v6H3V7m0-4h18v2H3V3m18 8v2H11v-2h10M3 15h14v2H3v-2m0 4h18v2H3v-2z\" fill=\"currentColor\"/></svg>',\n    floatRight: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M15 7h6v6h-6V7M3 3h18v2H3V3m10 4v2H3V7h10m-4 4v2H3v-2h6m-6 4h14v2H3v-2m0 4h18v2H3v-2z\" fill=\"currentColor\"/></svg>',\n    fullScreen: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M9.5 13.09l1.41 1.41l-4.5 4.5H10v2H3v-7h2v3.59l4.5-4.5m1.41-3.59L9.5 10.91L5 6.41V10H3V3h7v2H6.41l4.5 4.5m3.59 3.59l4.5 4.5V14h2v7h-7v-2h3.59l-4.5-4.5l1.41-1.41M13.09 9.5l4.5-4.5H14V3h7v7h-2V6.41l-4.5 4.5l-1.41-1.41z\" fill=\"currentColor\"/></svg>',\n    hr: '<span class=\"d-block\" style=\"width: 12px; border-bottom: 2px solid currentColor;\"></span>',\n    image: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M8.5 13.5l2.5 3l3.5-4.5l4.5 6H5m16 1V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z\" fill=\"currentColor\"/></svg>',\n    imageOriginal: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M12 8c-3.56 0-5.35 4.31-2.83 6.83C11.69 17.35 16 15.56 16 12c0-2.21-1.79-4-4-4m-7 7H3v4c0 1.1.9 2 2 2h4v-2H5M5 5h4V3H5c-1.1 0-2 .9-2 2v4h2m14-6h-4v2h4v4h2V5c0-1.1-.9-2-2-2m0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2\" fill=\"currentColor\"/></svg>',\n    imageRemove: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M5 3c-1.1 0-2 .9-2 2v14a2 2 0 0 0 2 2h9.09c-.06-.33-.09-.66-.09-1c0-.68.12-1.36.35-2H5l3.5-4.5l2.5 3l3.5-4.5l2.23 2.97c.97-.63 2.11-.97 3.27-.97c.34 0 .67.03 1 .09V5a2 2 0 0 0-2-2H5m11.47 14.88L18.59 20l-2.12 2.12l1.41 1.42L20 21.41l2.12 2.13l1.42-1.42L21.41 20l2.13-2.12l-1.42-1.42L20 18.59l-2.12-2.12l-1.42 1.41z\" fill=\"currentColor\"/></svg>',\n    indent: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M11 13h10v-2H11m0-2h10V7H11M3 3v2h18V3M11 17h10v-2H11M3 8v8l4-4m-4 9h18v-2H3v2z\" fill=\"currentColor\"/></svg>',\n    italic: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z\" fill=\"currentColor\"/></svg>',\n    link: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5a5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1c0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5a5 5 0 0 0-5-5z\" fill=\"currentColor\"/></svg>',\n    linkEdit: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M5 3c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7H5V5h7V3H5m12.78 1a.69.69 0 0 0-.48.2l-1.22 1.21l2.5 2.5L19.8 6.7c.26-.26.26-.7 0-.95L18.25 4.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L8 13.5V16h2.5l7.37-7.38l-2.5-2.5z\" fill=\"currentColor\"/></svg>',\n    orderedList: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 0 1 .75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z\" fill=\"currentColor\"/></svg>',\n    outdent: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M11 13h10v-2H11m0-2h10V7H11M3 3v2h18V3M3 21h18v-2H3m0-7l4 4V8m4 9h10v-2H11v2z\" fill=\"currentColor\"/></svg>',\n    paragraph: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M10 11a4 4 0 0 1-4-4a4 4 0 0 1 4-4h8v2h-2v16h-2V5h-2v16h-2V11z\" fill=\"currentColor\"/></svg>',\n    redo: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M18.4 10.6C16.55 9 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\" fill=\"currentColor\"/></svg>',\n    removeFormat: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M6 5v.18L8.82 8h2.4l-.72 1.68l2.1 2.1L14.21 8H20V5H6M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21L18 19.73L3.55 5.27L3.27 5z\" fill=\"currentColor\"/></svg>',\n    source: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M14.6 16.6l4.6-4.6l-4.6-4.6L16 6l6 6l-6 6l-1.4-1.4m-5.2 0L4.8 12l4.6-4.6L8 6l-6 6l6 6l1.4-1.4z\" fill=\"currentColor\"/></svg>',\n    strikethrough: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M3 14h18v-2H3m2-8v3h5v3h4V7h5V4m-9 15h4v-3h-4v3z\" fill=\"currentColor\"/></svg>',\n    style: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M18.5 4l1.16 4.35l-.96.26c-.45-.87-.91-1.74-1.44-2.18C16.73 6 16.11 6 15.5 6H13v10.5c0 .5 0 1 .33 1.25c.34.25 1 .25 1.67.25v1H9v-1c.67 0 1.33 0 1.67-.25c.33-.25.33-.75.33-1.25V6H8.5c-.61 0-1.23 0-1.76.43c-.53.44-.99 1.31-1.44 2.18l-.96-.26L5.5 4h13z\" fill=\"currentColor\"/></svg>',\n    superscript: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M16 7.41L11.41 12L16 16.59L14.59 18L10 13.41L5.41 18L4 16.59L8.59 12L4 7.41L5.41 6L10 10.59L14.59 6L16 7.41M21.85 9h-4.88V8l.89-.82c.76-.64 1.32-1.18 1.7-1.63c.37-.44.56-.85.57-1.23a.884.884 0 0 0-.27-.7c-.18-.19-.47-.28-.86-.29c-.31.01-.58.07-.84.17l-.66.39l-.45-1.17c.27-.22.59-.39.98-.53S18.85 2 19.32 2c.78 0 1.38.2 1.78.61c.4.39.62.93.62 1.57c-.01.56-.19 1.08-.54 1.55c-.34.48-.76.93-1.27 1.36l-.64.52v.02h2.58V9z\" fill=\"currentColor\"/></svg>',\n    table: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M5 4h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2m0 4v4h6V8H5m8 0v4h6V8h-6m-8 6v4h6v-4H5m8 0v4h6v-4h-6z\" fill=\"currentColor\"/></svg>',\n    tableColumnAfter: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M11 2a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2V2h9m-7 8v4h7v-4H4m0 6v4h7v-4H4M4 4v4h7V4H4m11 7h3V8h2v3h3v2h-3v3h-2v-3h-3v-2z\" fill=\"currentColor\"/></svg>',\n    tableColumnBefore: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M13 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h9V2h-9m7 8v4h-7v-4h7m0 6v4h-7v-4h7m0-12v4h-7V4h7M9 11H6V8H4v3H1v2h3v3h2v-3h3v-2z\" fill=\"currentColor\"/></svg>',\n    tableColumnRemove: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M4 2h7a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m0 8v4h7v-4H4m0 6v4h7v-4H4M4 4v4h7V4H4m13.59 8L15 9.41L16.41 8L19 10.59L21.59 8L23 9.41L20.41 12L23 14.59L21.59 16L19 13.41L16.41 16L15 14.59L17.59 12z\" fill=\"currentColor\"/></svg>',\n    tableRemove: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M15.46 15.88l1.42-1.42L19 16.59l2.12-2.13l1.42 1.42L20.41 18l2.13 2.12l-1.42 1.42L19 19.41l-2.12 2.13l-1.42-1.42L17.59 18l-2.13-2.12M4 3h14a2 2 0 0 1 2 2v7.08a6.01 6.01 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m0 4v4h6V7H4m8 0v4h6V7h-6m-8 6v4h6v-4H4z\" fill=\"currentColor\"/></svg>',\n    tableRowAfter: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M22 10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3h2v2h4V3h2v2h4V3h2v2h4V3h2v7M4 10h4V7H4v3m6 0h4V7h-4v3m10 0V7h-4v3h4m-9 4h2v3h3v2h-3v3h-2v-3H8v-2h3v-3z\" fill=\"currentColor\"/></svg>',\n    tableRowBefore: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M22 14a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7h2v-2h4v2h2v-2h4v2h2v-2h4v2h2v-7M4 14h4v3H4v-3m6 0h4v3h-4v-3m10 0v3h-4v-3h4m-9-4h2V7h3V5h-3V2h-2v3H8v2h3v3z\" fill=\"currentColor\"/></svg>',\n    tableRowRemove: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M9.41 13L12 15.59L14.59 13L16 14.41L13.41 17L16 19.59L14.59 21L12 18.41L9.41 21L8 19.59L10.59 17L8 14.41L9.41 13M22 9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v3M4 9h4V6H4v3m6 0h4V6h-4v3m6 0h4V6h-4v3z\" fill=\"currentColor\"/></svg>',\n    underline: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M5 21h14v-2H5v2m7-4a6 6 0 0 0 6-6V3h-2.5v8a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 11V3H6v8a6 6 0 0 0 6 6z\" fill=\"currentColor\"/></svg>',\n    undo: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M12.5 8c-2.65 0-5.05 1-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88c3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\" fill=\"currentColor\"/></svg>',\n    unlink: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1c0 1.43-.98 2.63-2.31 3l1.46 1.44C20.88 15.61 22 13.95 22 12a5 5 0 0 0-5-5m-1 4h-2.19l2 2H16v-2M2 4.27l3.11 3.11A4.991 4.991 0 0 0 2 12a5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1c0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74L3.27 3L2 4.27z\" fill=\"currentColor\"/></svg>',\n    unorderedList: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M7 5h14v2H7V5m0 8v-2h14v2H7M4 4.5A1.5 1.5 0 0 1 5.5 6A1.5 1.5 0 0 1 4 7.5A1.5 1.5 0 0 1 2.5 6A1.5 1.5 0 0 1 4 4.5m0 6A1.5 1.5 0 0 1 5.5 12A1.5 1.5 0 0 1 4 13.5A1.5 1.5 0 0 1 2.5 12A1.5 1.5 0 0 1 4 10.5M7 19v-2h14v2H7m-3-2.5A1.5 1.5 0 0 1 5.5 18A1.5 1.5 0 0 1 4 19.5A1.5 1.5 0 0 1 2.5 18A1.5 1.5 0 0 1 4 16.5z\" fill=\"currentColor\"/></svg>',\n    video: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 24 24\"><path d=\"M17 10.5V7a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-3.5l4 4v-11l-4 4z\" fill=\"currentColor\"/></svg>',\n};\n","import $ from '@fr0st/query';\n\nexport default {\n    alignCenter: {\n        command: 'justifyCenter',\n    },\n    alignJustify: {\n        command: 'justifyFull',\n    },\n    alignLeft: {\n        command: 'justifyLeft',\n    },\n    alignRight: {\n        command: 'justifyRight',\n    },\n    bold: {\n        command: 'bold',\n    },\n    color: {\n        setContent() {\n            const backColor = document.queryCommandValue('backColor');\n            const foreColor = document.queryCommandValue('foreColor');\n\n            const span = $.create('span', {\n                text: 'A',\n                class: this.constructor.classes.colorBtnContent,\n                style: {\n                    color: foreColor,\n                    backgroundColor: backColor,\n                },\n            });\n\n            return $.getProperty(span, 'outerHTML');\n        },\n        dropdown(dropdown) {\n            this._colorDropdown(dropdown);\n        },\n    },\n    font: {\n        setContent() {\n            const fontName = document.queryCommandValue('fontName').replace(/\"/g, '');\n\n            return this._options.fonts.includes(fontName) ?\n                fontName :\n                this._options.defaultFont;\n        },\n        dropdown(dropdown) {\n            this._fontDropdown(dropdown);\n        },\n    },\n    fontSize: {\n        setContent() {\n            const size = document.queryCommandValue('fontSize');\n\n            if (size) {\n                return this.constructor.fontSizes[size];\n            }\n\n            const fontSizePx = $.css(this._editor, 'fontSize');\n            const fontSize = parseFloat(fontSizePx);\n            return Math.round(fontSize);\n        },\n        dropdown(dropdown) {\n            this._fontSizeDropdown(dropdown);\n        },\n    },\n    fullScreen: {\n        action() {\n            if (this._fullScreen) {\n                UI.Modal.init(this._fullScreen).hide();\n                return;\n            }\n\n            this._fullScreen = this.constructor._createModal({\n                content: this._container,\n                fullScreen: true,\n                onShown: (_) => {\n                    if ($.isVisible(this._sourceContainer)) {\n                        $.focus(this._source);\n                    } else {\n                        $.focus(this._editor);\n                    }\n                },\n                onHide: (_) => {\n                    $.insertBefore(this._container, this._node);\n                    this._fullScreen = null;\n                },\n            });\n        },\n    },\n    hr: {\n        command: 'insertHorizontalRule',\n    },\n    image: {\n        action() {\n            this._showImageModal();\n        },\n    },\n    indent: {\n        command: 'indent',\n    },\n    italic: {\n        command: 'italic',\n    },\n    link: {\n        action() {\n            this._showLinkModal();\n        },\n    },\n    orderedList: {\n        command: 'insertOrderedList',\n        disableCheck: () => !['', 'p']\n            .includes(document.queryCommandValue('formatBlock')),\n    },\n    outdent: {\n        command: 'outdent',\n    },\n    paragraph: {\n        dropdown: [\n            ['alignLeft', 'alignCenter', 'alignRight', 'alignJustify'],\n            ['indent', 'outdent'],\n        ],\n    },\n    redo: {\n        command: 'redo',\n        disableCheck() {\n            return !this._redoHistory.length;\n        },\n    },\n    removeFormat: {\n        command: 'removeFormat',\n    },\n    source: {\n        action() {\n            if ($.isVisible(this._sourceContainer)) {\n                this._showEditor();\n                $.focus(this._editor);\n            } else {\n                this._showSource();\n                $.focus(this._source);\n            }\n\n            this._refreshToolbar();\n        },\n    },\n    strikethrough: {\n        command: 'strikeThrough',\n    },\n    style: {\n        dropdown(dropdown) {\n            this._styleDropdown(dropdown);\n        },\n        disableCheck: (_) =>\n            document.queryCommandState('insertOrderedList') ||\n            document.queryCommandState('insertUnorderedList'),\n    },\n    subscript: {\n        command: 'subscript',\n    },\n    superscript: {\n        command: 'superscript',\n    },\n    table: {\n        dropdown(dropdown) {\n            this._tableDropdown(dropdown);\n        },\n    },\n    underline: {\n        command: 'underline',\n    },\n    undo: {\n        command: 'undo',\n        disableCheck() {\n            return !this._history.length;\n        },\n    },\n    unlink: {\n        command: 'unlink',\n    },\n    unorderedList: {\n        command: 'insertUnorderedList',\n        disableCheck: () => !['', 'p']\n            .includes(document.queryCommandValue('formatBlock')),\n    },\n    video: {\n        action() {\n            this._showVideoModal();\n        },\n    },\n};\n","import $ from '@fr0st/query';\nimport { getRange } from './selection.js';\n\nexport default {\n    floatLeft: {\n        action(node) {\n            $.setStyle(node, { float: 'left' });\n        },\n    },\n    floatRight: {\n        action(node) {\n            $.setStyle(node, { float: 'right' });\n        },\n    },\n    floatNone: {\n        action(node) {\n            $.removeStyle(node, 'float');\n        },\n    },\n    imageFull: {\n        content: '100%',\n        action(node) {\n            $.setStyle(node, { width: '100%' });\n        },\n    },\n    imageHalf: {\n        content: '50%',\n        action(node) {\n            $.setStyle(node, { width: '50%' });\n        },\n    },\n    imageQuarter: {\n        content: '25%',\n        action(node) {\n            $.setStyle(node, { width: '25%' });\n        },\n    },\n    imageOriginal: {\n        action(node) {\n            $.removeStyle(node, 'width');\n        },\n    },\n    imageRemove: {\n        action(node) {\n            $.detach(node);\n\n            this._removePopover();\n        },\n    },\n    link: {\n        render(node) {\n            const href = $.getAttribute(node, 'href');\n            return $.create('a', {\n                text: href,\n                class: this.constructor.classes.linkUrl,\n                attributes: {\n                    href,\n                    target: '_blank',\n                },\n            });\n        },\n    },\n    linkEdit: {\n        action(node) {\n            this._showLinkModal(node);\n        },\n    },\n    tableColumnAfter: {\n        action(node) {\n            this._updateTable(node, (td, _, table) => {\n                const index = $.index(td);\n                const rows = $.find(':scope > thead > tr, :scope > tbody > tr', table);\n\n                this._observe(false);\n\n                for (const row of rows) {\n                    const newTd = $.create('td', {\n                        html: '<br>',\n                    });\n                    const cells = $.children(row, 'th, td');\n                    $.after(cells[index], newTd);\n                }\n\n                this._observe();\n                this._updateValue();\n            });\n        },\n    },\n    tableColumnBefore: {\n        action(node) {\n            this._updateTable(node, (td, _, table) => {\n                const index = $.index(td);\n                const rows = $.find(':scope > thead > tr, :scope > tbody > tr', table);\n\n                this._observe(false);\n\n                for (const row of rows) {\n                    const newTd = $.create('td', {\n                        html: '<br>',\n                    });\n                    const cells = $.children(row, 'th, td');\n                    $.before(cells[index], newTd);\n                }\n\n                this._observe();\n                this._updateValue();\n            });\n        },\n    },\n    tableColumnRemove: {\n        action(node) {\n            this._updateTable(node, (td, _, table) => {\n                const index = $.index(td);\n                const rows = $.find(':scope > thead > tr, :scope > tbody > tr', table);\n\n                this._observe(false);\n\n                for (const row of rows) {\n                    const cells = $.children(row, 'th, td');\n                    $.remove(cells[index]);\n                }\n\n                this._observe();\n                this._updateValue();\n                this._removePopover();\n            });\n        },\n    },\n    tableRemove: {\n        action(node) {\n            const table = $.closest(node, 'table', this._editor).shift();\n            $.detach(table);\n\n            this._removePopover();\n        },\n    },\n    tableRowAfter: {\n        action(node) {\n            this._updateTable(node, (_, tr) => {\n                const columns = $.children(tr).length;\n                const newTr = $.create('tr');\n\n                for (let i = 0; i < columns; i++) {\n                    const newTd = $.create('td', {\n                        html: '<br>',\n                    });\n                    $.append(newTr, newTd);\n                }\n\n                $.after(tr, newTr);\n            });\n        },\n    },\n    tableRowBefore: {\n        action(node) {\n            this._updateTable(node, (_, tr) => {\n                const columns = $.children(tr).length;\n                const newTr = $.create('tr');\n\n                for (let i = 0; i < columns; i++) {\n                    const newTd = $.create('td', {\n                        html: '<br>',\n                    });\n                    $.append(newTr, newTd);\n                }\n\n                $.before(tr, newTr);\n            });\n        },\n    },\n    tableRowRemove: {\n        action(node) {\n            this._updateTable(node, (_, tr) => {\n                $.remove(tr);\n\n                this._removePopover();\n            });\n        },\n    },\n    unlink: {\n        action(node) {\n            $.select(node);\n            this.unlink();\n\n            const range = getRange();\n            range.collapse();\n        },\n    },\n};\n","import $ from '@fr0st/query';\n\n/**\n * Get a node from a container path.\n * @param {array} path The path.\n * @param {HTMLElement} container The container.\n * @return {Node|HTMLElement} The node.\n */\nfunction getNodeFromPath(path, container) {\n    let current = container;\n    for (const index of path) {\n        current = $.contents(current)[index];\n    }\n\n    return current;\n};\n\n/**\n * Get the path to a node from a container.\n * @param {Node|HTMLElement} node The node.\n * @param {HTMLElement} container The container.\n * @return {array} The path.\n */\nfunction getPathToNode(node, container) {\n    if ($.isSame(node, container)) {\n        return [];\n    }\n\n    return [...$.parents(node, null, container), node]\n        .map((node) => $.contents($.parent(node).shift()).indexOf(node));\n};\n\n/**\n * Add an item to the history.\n * @param {object} [data] The history data.\n */\nexport function _addHistory({ html, selectionData = null } = {}) {\n    this._history.push({ html, selectionData });\n\n    while (this._history.length > this._options.historyLimit) {\n        this._history.shift();\n    }\n};\n\n/**\n * Get selection data for history.\n * @return {object} The selection data.\n */\nexport function _getSelectionData() {\n    const { anchorNode, anchorOffset, focusNode, focusOffset } = window.getSelection();\n\n    if (\n        !anchorNode ||\n        !focusNode ||\n        (!$.isSame(this._editor, anchorNode) && !$.hasDescendent(this._editor, anchorNode)) ||\n        (!$.isSame(this._editor, focusNode) && !$.hasDescendent(this._editor, focusNode))\n    ) {\n        return null;\n    }\n\n    return {\n        anchorPath: getPathToNode(anchorNode, this._editor),\n        anchorOffset: anchorOffset,\n        focusPath: getPathToNode(focusNode, this._editor),\n        focusOffset: focusOffset,\n    };\n};\n\n/**\n * Restore an item from history.\n * @param {object} [data] The history data.\n */\nexport function _restoreHistory({ html, selectionData = null } = {}) {\n    this._observe(false);\n\n    $.setHTML(this._editor, html);\n    $.setValue(this._node, html);\n    $.setValue(this._source, html);\n\n    const selection = window.getSelection();\n\n    if (selectionData) {\n        const anchorNode = getNodeFromPath(selectionData.anchorPath, this._editor);\n        const focusNode = getNodeFromPath(selectionData.focusPath, this._editor);\n        selection.setBaseAndExtent(anchorNode, selectionData.anchorOffset, focusNode, selectionData.focusOffset);\n    } else {\n        selection.selectAllChildren(this._editor);\n        selection.collapseToEnd();\n    }\n\n    this._checkEmpty();\n    this._observe();\n};\n","import $ from '@fr0st/query';\n\nconst transparent = 'rgba(0, 0, 0, 0)';\n\n/**\n * Determine if a node is a form element.\n * https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/elements\n * @param {Node} node The input node.\n * @return {Boolean} TRUE if the node is a form element, otherwise FALSE.\n */\nconst isFormElement = (node) => $.is(node, 'button, fieldset, input, object, output, select, textarea');\n\n/**\n * Determine if a node is phrasing content.\n * https://html.spec.whatwg.org/multipage/dom.html#phrasing-content\n * @param {Node} node The input node.\n * @return {Boolean} TRUE if the node is phrasing content, otherwise FALSE.\n */\nconst isPhrasingContent = (node) => $._isText(node) || $.is(node, 'a, abbr, area, audio, b, bdi, bdo, br, button, cite, code, data, datalist, del, dfn, em, embed, i, iframe, img, input, ins, kbd, label, map, mark, math, meter, noscript, object, output, picture, progress, q, ruby, s, samp, script, select, slot, small, span, strong, sub, sup, svg, template, textarea, time, u, var, video, wbr');\n\n/**\n * Determine if a node is a void element.\n * https://developer.mozilla.org/en-US/docs/Glossary/Void_element\n * @param {Node} node The input node.\n * @return {Boolean} TRUE if the node is a void element, otherwise FALSE.\n */\nconst isVoidElement = (node) => $.is(node, 'area, base, br, col, embed, hr, img, input, link, meta, param, source, track, wbr');\n\n/**\n * Determine if a node is a phrasing container.\n * @param {Node} node The input node.\n * @return {Boolean} TRUE if the node is a phrasing container, otherwise FALSE.\n */\nconst isPhrasingContainer = (node) => !$._isText(node) && isPhrasingContent(node) && !isVoidElement(node) && !isFormElement(node);\n\n/**\n * Join adjacent inline elements.\n * @param {HTMLElement} container The container.\n * @param {object} markers The selection markers.\n */\nexport function joinAdjacentNodes(container, markers) {\n    const elements = $.find('*', container);\n\n    const isMarker = (node) =>\n        (markers.start && $.isSame(node, markers.start)) ||\n        (markers.end && $.isSame(node, markers.end));\n\n    for (const element of elements) {\n        if (\n            isMarker(element) ||\n            !isPhrasingContainer(element)\n        ) {\n            continue;\n        }\n\n        const moveMarkers = [];\n        let next = element.nextSibling;\n        while (next && isMarker(next)) {\n            moveMarkers.push(next);\n            next = next.nextSibling;\n        }\n\n        if (\n            !next ||\n            !isPhrasingContainer(next) ||\n            !$.isEqual(element, next, { shallow: true })\n        ) {\n            continue;\n        }\n\n        $.prepend(next, $.contents(element));\n\n        if (moveMarkers.length) {\n            $.prepend(next, moveMarkers);\n        }\n\n        $.detach(element);\n    }\n};\n\n/**\n * Normalize phrasing containers.\n * @param {HTMLElement} container The container.\n */\nexport function normalizePhrasing(container) {\n    const elements = $.find('h1, h2, h3, h4, h5, h6, p, pre', container);\n\n    for (const element of elements) {\n        const contents = $.contents(element);\n\n        if (!contents.length) {\n            continue;\n        }\n\n        for (const [i, child] of contents.entries()) {\n            if (isPhrasingContent(child)) {\n                continue;\n            }\n\n            const nextSiblings = contents.splice(i);\n            $.after(element, nextSiblings);\n            break;\n        }\n\n        if (!contents.length) {\n            $.detach(element);\n        }\n    }\n};\n\n/**\n * Normalize span elements.\n * @param {HTMLElement} container The container.\n */\nexport function normalizeSpans(container) {\n    const spans = $.find('span', container);\n\n    for (const span of spans) {\n        if ([...$.getProperty(span, 'attributes')].length) {\n            continue;\n        }\n\n        const contents = $.contents(span);\n\n        if (contents.length) {\n            $.after(span, contents);\n            next = contents[0];\n        }\n\n        $.detach(span);\n    }\n};\n\n/**\n * Normalize style attributes.\n * @param {HTMLElement} container The container.\n */\nexport function normalizeStyles(container) {\n    const styleNodes = $.find('[style]', container);\n\n    for (const styleNode of styleNodes) {\n        const styles = $.getStyle(styleNode);\n\n        for (const [style, value] of Object.entries(styles)) {\n            if (value === 'inherit') {\n                $.removeStyle(styleNode, style);\n                continue;\n            }\n\n            const clone = $.clone(styleNode, { deep: false });\n            $.after(styleNode, clone);\n            $.removeAttribute(clone, 'style');\n            let testValue = $.css(clone, style);\n            $.detach(clone);\n\n            if (style === 'background-color' && testValue === transparent) {\n                testValue = [container, ...$.parents(styleNode, null, container)]\n                    .map((parent) => $.css(parent, style))\n                    .filter((parentStyle) => parentStyle !== transparent)\n                    .pop();\n            }\n\n            const cssValue = $.css(styleNode, style);\n\n            if (cssValue === testValue) {\n                $.removeStyle(styleNode, style);\n            }\n        }\n\n        if ($.getAttribute(styleNode, 'style') === '') {\n            $.removeAttribute(styleNode, 'style');\n        }\n    }\n};\n","import { initComponent } from '@fr0st/ui';\nimport Editor from './editor.js';\nimport icons from './icons.js';\nimport plugins from './plugins.js';\nimport popovers from './popovers.js';\nimport { buttons, colors, fonts, fontSizes, styles } from './values.js';\nimport { _events, _eventsDrop, _eventsEditor, _eventsPopover, _eventsResize, _eventsSource, _eventsToolbar } from './prototype/events.js';\nimport { _checkEmpty, _execCommand, _focusEditor, _refreshCursor, _refreshDisabled, _refreshLineNumbers, _refreshToolbar, _resetDropText, _showDropTarget, _showEditor, _showSource, _updateValue } from './prototype/helpers.js';\nimport { _addHistory, _getSelectionData, _restoreHistory } from './prototype/history.js';\nimport { _removeModal, _showImageModal, _showLinkModal, _showVideoModal } from './prototype/modals.js';\nimport { _insertNode, _normalize, _updateTable } from './prototype/nodes.js';\nimport { _highlightImage, _refreshPopover, _removePopover } from './prototype/popovers.js';\nimport { _render, _renderButton, _renderDrop, _renderEditor, _renderResize, _renderSource } from './prototype/render.js';\nimport { _colorDropdown, _fontDropdown, _fontSizeDropdown, _styleDropdown, _tableDropdown } from './prototype/render-dropdowns.js';\nimport { _renderPopover, _renderPopoverItem, _renderPopoverItems } from './prototype/render-popover.js';\nimport { _renderToolbar, _renderToolbarButton, _renderToolbarDropdown, _setToolbarData } from './prototype/render-toolbar.js';\nimport { _createCheckbox, _createFileInput, _createInput, _createModal } from './static/modals.js';\n\n// Editor defaults\nEditor.defaults = {\n    buttons: null,\n    popovers: {\n        image: [\n            ['imageFull', 'imageHalf', 'imageQuarter', 'imageOriginal'],\n            ['floatLeft', 'floatRight', 'floatNone'],\n            ['imageRemove'],\n        ],\n        link: [\n            'link',\n            ['linkEdit'],\n            ['unlink'],\n        ],\n        table: [\n            ['tableRowAfter', 'tableRowBefore', 'tableColumnBefore', 'tableColumnAfter'],\n            ['tableRowRemove', 'tableColumnRemove', 'tableRemove'],\n        ],\n    },\n    imageUpload(files) {\n        const promises = [];\n\n        for (const file of files) {\n            promises.push(new Promise((resolve, reject) => {\n                const reader = new FileReader();\n                reader.onload = (_) => {\n                    resolve(reader.result);\n                };\n                reader.onerror = (_) => {\n                    reject(new Error('Unable to read file'));\n                };\n                reader.readAsDataURL(file);\n            }));\n        }\n\n        Promise.allSettled(promises)\n            .then((results) => {\n                for (const result of results) {\n                    if (result.status !== 'fulfilled') {\n                        continue;\n                    }\n\n                    this.insertImage(result.value);\n                }\n            });\n    },\n    keyDown(e) {\n        if (!e.ctrlKey) {\n            return;\n        }\n\n        let action;\n        switch (e.key) {\n            case 'b':\n                action = 'bold';\n                break;\n            case 'i':\n                action = 'italic';\n                break;\n            case 'u':\n                action = 'underline';\n                break;\n            case 'y':\n                action = 'redo';\n                break;\n            case 'z':\n                action = 'undo';\n                break;\n            default:\n                return;\n        }\n\n        e.preventDefault();\n\n        this[action]();\n    },\n    defaultFont: 'Arial',\n    fonts: null,\n    height: 'auto',\n    resizable: true,\n    historyLimit: 1000,\n};\n\n// Editor classes\nEditor.classes = {\n    btn: 'btn btn-editor btn-sm fs-6 lh-1',\n    btnGroup: 'btn-group me-1 mb-1',\n    btnIcon: 'pe-none',\n    checkbox: 'input-check',\n    checkboxContainer: 'form-check',\n    color: 'editor-color flex-grow-1 d-block border-0',\n    colorBtnContent: 'fw-bold d-inline-block px-1 pe-none',\n    colorContainerRow: 'row g-0',\n    colorContainerColumn: 'col-6',\n    colorDefaultBtn: 'btn btn-outline-editor btn-sm d-block w-100 py-0',\n    colorLabel: 'd-block text-center',\n    colorLabelContainer: 'p-2',\n    colorRow: 'd-flex flex-row px-2',\n    container: 'card overflow-hidden shadow-sm',\n    dropdown: 'dropdown-menu',\n    dropdownButtons: 'pt-2 pe-1 pb-1 ps-2 text-nowrap',\n    dropdownGroup: 'btn-group',\n    dropdownItem: 'dropdown-item',\n    dropdownItemDisabled: 'disabled',\n    dropdownToggle: 'dropdown-toggle',\n    dropHover: 'text-primary',\n    dropTarget: 'editor-drop-target position-absolute w-100 text-center',\n    dropText: 'position-absolute top-50 translate-middle h5 pe-none',\n    editor: 'editor w-100 p-2 outline-0',\n    editorBody: 'card-body d-flex p-0',\n    editorContainer: 'editor-container position-relative',\n    editorDisabled: 'bg-body-tertiary pe-none',\n    editorScroll: 'editor-scroll d-block w-100 overflow-auto',\n    formError: 'form-error',\n    formGroup: 'mb-2',\n    imgCursor: 'editor-img-cursor position-absolute translate-middle pe-none',\n    imgHighlight: 'editor-img-highlight position-absolute pe-none',\n    imgResize: 'editor-img-resize position-absolute top-100 start-100 translate-middle pe-auto',\n    imgSize: 'editor-img-size position-absolute bottom-0 end-0 text-end me-2 mb-2 py-1 px-3 rounded',\n    input: 'input-filled',\n    inputContainer: 'form-input',\n    inputRipple: 'ripple-line',\n    invalidFeedback: 'invalid-feedback',\n    linkUrl: 'editor-link-url d-inline-block text-truncate me-1',\n    modal: 'modal',\n    modalBody: 'modal-body',\n    modalBtnClose: 'btn-close',\n    modalBtnPrimary: 'btn btn-primary ripple mb-0',\n    modalBtnSecondary: 'btn btn-secondary ripple mb-0',\n    modalContent: 'modal-content shadow',\n    modalDialog: 'modal-dialog',\n    modalFooter: 'modal-footer',\n    modalFullscreen: 'modal-fullscreen',\n    modalHeader: 'modal-header',\n    modalTitle: 'modal-title',\n    popover: 'editor-popover popover',\n    popoverArrow: 'popover-arrow',\n    popoverBody: 'popover-body mb-n1 ms-n2 me-n3',\n    resizeBar: 'editor-resize card-footer',\n    source: 'editor-source font-monospace outline-0 border-0 p-2 mb-0 w-100',\n    sourceContainer: 'd-flex h-100',\n    sourceLines: 'font-monospace bg-body-secondary p-2 mb-0 border-end',\n    sourceOuter: 'w-100 overflow-hidden',\n    sourceScroll: 'd-flex w-100',\n    styleContent: 'mb-1',\n    table: 'table table-bordered',\n    tableCell: 'flex-column',\n    tableDropdown: 'p-2',\n    tableHover: 'bg-primary',\n    tableInfo: 'text-muted',\n    tableLink: 'editor-table-link d-block border border-dark p-2 rounded-0',\n    tableRow: 'd-flex flex-row',\n    toolbar: 'card-header pt-1 pe-0 pb-0 ps-1',\n    toolbarButtons: 'btn-toolbar',\n};\n\n// Editor lang\nEditor.lang = {\n    drop: {\n        drop: 'Drop image or text',\n        dropHere: 'Drop image or text here',\n    },\n    dropdowns: {\n        colorBackground: 'Background Color',\n        colorDefault: 'Use Default',\n        colorForeground: 'Foreground Color',\n        colorTransparent: 'Use Transparent',\n    },\n    modals: {\n        cancel: 'Cancel',\n        close: 'Close',\n        imageFile: 'Select Files',\n        imageUrl: 'Image URL',\n        insertImage: 'Insert Image',\n        insertLink: 'Insert Link',\n        insertVideo: 'Insert Video',\n        linkNewWindow: 'Open in new window',\n        linkText: 'Link Text',\n        linkUrl: 'Link URL',\n        videoUrl: 'Video URL',\n        videoUrlInvalid: 'Invalid video URL.',\n    },\n    plugins: {\n        alignCenter: 'Align Center',\n        alignJustify: 'Justify Full',\n        alignLeft: 'Align Left',\n        alignRight: 'Align Right',\n        bold: 'Bold',\n        color: 'Font Color',\n        font: 'Font Family',\n        fontSize: 'Font Size',\n        fullScreen: 'Full Screen',\n        hr: 'Horizontal Rule',\n        image: 'Image',\n        indent: 'Indent',\n        italic: 'Italic',\n        link: 'Link',\n        orderedList: 'Ordered List',\n        outdent: 'Outdent',\n        paragraph: 'Paragraph',\n        redo: 'Redo',\n        removeFormat: 'Remove Formatting',\n        source: 'View Source',\n        strikethrough: 'Strikethrough',\n        style: 'Style',\n        subscript: 'Subscript',\n        superscript: 'Superscript',\n        table: 'Table',\n        underline: 'Underline',\n        undo: 'Undo',\n        unlink: 'Unlink',\n        unorderedList: 'Unordered List',\n        video: 'Video',\n    },\n    popovers: {\n        imageFull: 'Full Size',\n        imageHalf: 'Half Size',\n        imageOriginal: 'Original Size',\n        imageQuarter: 'Quarter Size',\n        imageRemove: 'Remove Image',\n        floatLeft: 'Float Left',\n        floatNone: 'Remove Float',\n        floatRight: 'Float Right',\n        linkEdit: 'Edit Link',\n        tableColumnAfter: 'Add Column After',\n        tableColumnBefore: 'Add Column Before',\n        tableColumnRemove: 'Remove Column',\n        tableRemove: 'Remove Table',\n        tableRowAfter: 'Add Row After',\n        tableRowBefore: 'Add Row Before',\n        tableRowRemove: 'Remove Row',\n        unlink: 'Remove Link',\n    },\n    styles: {\n        p: 'Paragraph',\n        blockquote: 'Quote',\n        pre: 'Code',\n        h1: 'Header 1',\n        h2: 'Header 2',\n        h3: 'Header 3',\n        h4: 'Header 4',\n        h5: 'Header 5',\n        h6: 'Header 6',\n    },\n};\n\n// Editor static\nEditor.buttons = buttons;\nEditor.colors = colors;\nEditor.fonts = fonts;\nEditor.fontSizes = fontSizes;\nEditor.icons = icons;\nEditor.plugins = plugins;\nEditor.popovers = popovers;\nEditor.styles = styles;\n\nEditor._createCheckbox = _createCheckbox;\nEditor._createFileInput = _createFileInput;\nEditor._createInput = _createInput;\nEditor._createModal = _createModal;\n\n// Editor prototype\nconst proto = Editor.prototype;\n\nproto._addHistory = _addHistory;\nproto._checkEmpty = _checkEmpty;\nproto._colorDropdown = _colorDropdown;\nproto._events = _events;\nproto._eventsDrop = _eventsDrop;\nproto._eventsEditor = _eventsEditor;\nproto._eventsPopover = _eventsPopover;\nproto._eventsResize = _eventsResize;\nproto._eventsSource = _eventsSource;\nproto._eventsToolbar = _eventsToolbar;\nproto._execCommand = _execCommand;\nproto._focusEditor = _focusEditor;\nproto._fontDropdown = _fontDropdown;\nproto._fontSizeDropdown = _fontSizeDropdown;\nproto._getSelectionData = _getSelectionData;\nproto._highlightImage = _highlightImage;\nproto._insertNode = _insertNode;\nproto._normalize = _normalize;\nproto._refreshCursor = _refreshCursor;\nproto._refreshDisabled = _refreshDisabled;\nproto._refreshLineNumbers = _refreshLineNumbers;\nproto._refreshPopover = _refreshPopover;\nproto._refreshToolbar = _refreshToolbar;\nproto._removeModal = _removeModal;\nproto._removePopover = _removePopover;\nproto._render = _render;\nproto._renderButton = _renderButton;\nproto._renderDrop = _renderDrop;\nproto._renderEditor = _renderEditor;\nproto._renderPopover = _renderPopover;\nproto._renderPopoverItem = _renderPopoverItem;\nproto._renderPopoverItems = _renderPopoverItems;\nproto._renderResize = _renderResize;\nproto._renderSource = _renderSource;\nproto._renderToolbar = _renderToolbar;\nproto._renderToolbarButton = _renderToolbarButton;\nproto._renderToolbarDropdown = _renderToolbarDropdown;\nproto._resetDropText = _resetDropText;\nproto._restoreHistory = _restoreHistory;\nproto._setToolbarData = _setToolbarData;\nproto._showDropTarget = _showDropTarget;\nproto._showEditor = _showEditor;\nproto._showImageModal = _showImageModal;\nproto._showLinkModal = _showLinkModal;\nproto._showSource = _showSource;\nproto._showVideoModal = _showVideoModal;\nproto._styleDropdown = _styleDropdown;\nproto._tableDropdown = _tableDropdown;\nproto._updateTable = _updateTable;\nproto._updateValue = _updateValue;\n\n// Editor init\ninitComponent('editor', Editor);\n\nexport default Editor;\n","const buttons = [\n    ['style'],\n    ['bold', 'italic', 'underline', 'removeFormat'],\n    ['font'],\n    ['color'],\n    ['unorderedList', 'orderedList', 'paragraph'],\n    ['table'],\n    ['link', 'image', 'video'],\n    ['fullScreen', 'source'],\n];\n\nconst colors = [\n    {\n        'Black': '#000000',\n        'Tundora': '#424242',\n        'Dove Gray': '#636363',\n        'Star Dust': '#9C9C94',\n        'Pale Slate': '#CEC6CE',\n        'Gallery': '#EFEFEF',\n        'Alabaster': '#F7F7F7',\n        'White': '#FFFFFF',\n    },\n    {\n        'Red': '#FF0000',\n        'Orange Peel': '#FF9C00',\n        'Yellow': '#FFFF00',\n        'Green': '#00FF00',\n        'Cyan': '#00FFFF',\n        'Blue': '#0000FF',\n        'Electric Violet': '#9C00FF',\n        'Magenta': '#FF00FF',\n    },\n    {\n        'Azalea': '#F7C6CE',\n        'Karry': '#FFE7CE',\n        'Egg White': '#FFEFC6',\n        'Zanah': '#D6EFD6',\n        'Botticelli': '#CEDEE7',\n        'Tropical Blue': '#CEE7F7',\n        'Mischka': '#D6D6E7',\n        'Twilight': '#E7D6DE',\n    },\n    {\n        'Tonys Pink': '#E79C9C',\n        'Peach Orange': '#FFC69C',\n        'Cream Brulee': '#FFE79C',\n        'Sprout': '#B5D6A5',\n        'Casper': '#A5C6CE',\n        'Perano': '#9CC6EF',\n        'Cold Purple': '#B5A5D6',\n        'Careys Pink': '#D6A5BD',\n    },\n    {\n        'Mandy': '#E76363',\n        'Rajah': '#F7AD6B',\n        'Dandelion': '#FFD663',\n        'Olivine': '#94BD7B',\n        'Gulf Stream': '#73A5AD',\n        'Viking': '#6BADDE',\n        'Blue Marguerite': '#8C7BC6',\n        'Puce': '#C67BA5',\n    },\n    {\n        'Guardsman Red': '#CE0000',\n        'Fire Bush': '#E79439',\n        'Golden Dream': '#EFC631',\n        'Chelsea Cucumber': '#6BA54A',\n        'Smalt Blue': '#4A7B8C',\n        'Boston Blue': '#3984C6',\n        'Butterfly Bush': '#634AA5',\n        'Cadillac': '#A54A7B',\n    },\n    {\n        'Sangria': '#9C0000',\n        'Mai Tai': '#B56308',\n        'Buddha Gold': '#BD9400',\n        'Forest Green': '#397B21',\n        'Eden': '#104A5A',\n        'Venice Blue': '#085294',\n        'Meteorite': '#311873',\n        'Claret': '#731842',\n    },\n    {\n        'Rosewood': '#630000',\n        'Cinnamon': '#7B3900',\n        'Olive': '#846300',\n        'Parsley': '#295218',\n        'Tiber': '#083139',\n        'Midnight Blue': '#003163',\n        'Valentino': '#21104A',\n        'Loulou': '#4A1031',\n    },\n];\n\nconst fonts = [\n    'Arial',\n    'Arial Black',\n    'Comic Sans MS',\n    'Courier New',\n    'Garamond',\n    'Georgia',\n    'Helvetica',\n    'Impact',\n    'Tahoma',\n    'Times New Roman',\n    'Trebuchet MS',\n    'Verdana',\n];\n\nconst fontSizes = {\n    1: 8,\n    2: 13,\n    3: 16,\n    4: 18,\n    5: 24,\n    6: 32,\n    7: 48,\n};\n\nconst styles = [\n    'p',\n    'blockquote',\n    'pre',\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n];\n\nexport { buttons, colors, fonts, fontSizes, styles };\n","import $ from '@fr0st/query';\nimport { Modal } from '@fr0st/ui';\n\n/**\n * Create a form checkbox.\n * @param {object} options Options for the checkbox.\n * @return {object} An object containing the form elements.\n */\nexport function _createCheckbox(options) {\n    const group = $.create('div', {\n        class: this.classes.formGroup,\n    });\n\n    const inputContainer = $.create('div', {\n        class: this.classes.checkboxContainer,\n    });\n\n    const input = $.create('input', {\n        class: this.classes.checkbox,\n        attributes: {\n            id: options.id,\n            type: 'checkbox',\n            ...options.attributes,\n        },\n    });\n\n    const label = $.create('label', {\n        text: options.label,\n        attributes: {\n            for: options.id,\n        },\n    });\n\n    $.append(inputContainer, input);\n    $.append(inputContainer, label);\n    $.append(group, inputContainer);\n\n    return { group, input };\n};\n\n/**\n * Create a form file input.\n * @param {object} options Options for the file input.\n * @return {object} An object containing the form elements.\n */\nexport function _createFileInput(options) {\n    const group = $.create('div', {\n        class: this.classes.formGroup,\n    });\n\n    const label = $.create('label', {\n        text: options.label,\n        attributes: {\n            for: options.id,\n        },\n    });\n\n    const inputContainer = $.create('div', {\n        class: this.classes.inputContainer,\n    });\n\n    const input = $.create('input', {\n        attributes: {\n            id: options.id,\n            type: 'file',\n            ...options.attributes,\n        },\n    });\n\n    $.append(group, label);\n    $.append(inputContainer, input);\n    $.append(group, inputContainer);\n\n    return { group, input };\n};\n\n/**\n * Create a form text input.\n * @param {object} options Options for the text input.\n * @return {object} An object containing the form elements.\n */\nexport function _createInput(options) {\n    const group = $.create('div', {\n        class: this.classes.formGroup,\n    });\n\n    const label = $.create('label', {\n        text: options.label,\n        attributes: {\n            for: options.id,\n        },\n    });\n\n    const inputContainer = $.create('div', {\n        class: this.classes.inputContainer,\n    });\n\n    const input = $.create('input', {\n        class: this.classes.input,\n        attributes: {\n            id: options.id,\n            type: options.type || 'text',\n            ...options.attributes,\n        },\n    });\n\n    const ripple = $.create('div', {\n        class: this.classes.inputRipple,\n    });\n\n    const invalidFeedback = $.create('div', {\n        class: this.classes.invalidFeedback,\n    });\n\n    $.append(group, label);\n    $.append(inputContainer, input);\n    $.append(inputContainer, ripple);\n    $.append(group, inputContainer);\n    $.append(group, invalidFeedback);\n\n    return { group, input, invalidFeedback };\n};\n\n/**\n * Create a modal.\n * @param {object} options Options for the modal.\n * @return {HTMLElement} The modal element.\n */\nexport function _createModal(options) {\n    const modal = $.create('div', {\n        class: this.classes.modal,\n        attributes: {\n            'tabindex': -1,\n            'role': 'dialog',\n            'aria-model': true,\n        },\n    });\n\n    const modalDialog = $.create('div', {\n        class: this.classes.modalDialog,\n    });\n\n    $.append(modal, modalDialog);\n\n    if (options.fullScreen) {\n        $.addClass(modalDialog, this.classes.modalFullscreen);\n    }\n\n    const modalContent = $.create('form', {\n        class: this.classes.modalContent,\n    });\n\n    $.append(modalDialog, modalContent);\n\n    const modalHeader = $.create('div', {\n        class: this.classes.modalHeader,\n    });\n\n    $.append(modalContent, modalHeader);\n\n    if (options.title) {\n        const modalTitle = $.create('h6', {\n            class: this.classes.modalTitle,\n            text: options.title,\n        });\n\n        $.append(modalHeader, modalTitle);\n    }\n\n    const closeBtn = $.create('button', {\n        class: this.classes.modalBtnClose,\n        dataset: {\n            uiDismiss: 'modal',\n        },\n        attributes: {\n            'type': 'button',\n            'aria-label': this.lang.modals.close,\n        },\n    });\n\n    $.append(modalHeader, closeBtn);\n\n    if (options.content) {\n        const modalBody = $.create('div', {\n            class: this.classes.modalBody,\n        });\n\n        $.append(modalBody, options.content);\n        $.append(modalContent, modalBody);\n    }\n\n    if (options.onSubmit) {\n        const modalFooter = $.create('div', {\n            class: this.classes.modalFooter,\n        });\n\n        $.append(modalContent, modalFooter);\n\n        const cancelButton = $.create('button', {\n            text: options.cancelText,\n            class: this.classes.modalBtnSecondary,\n            dataset: {\n                uiDismiss: 'modal',\n            },\n            attributes: {\n                type: 'button',\n            },\n        });\n\n        $.append(modalFooter, cancelButton);\n\n        const submitButton = $.create('button', {\n            text: options.submitText,\n            class: this.classes.modalBtnPrimary,\n            attributes: {\n                type: 'submit',\n            },\n        });\n\n        $.append(modalFooter, submitButton);\n\n        $.addEvent(modalContent, 'submit', (e) => {\n            e.preventDefault();\n\n            if (options.onSubmit(e) === false) {\n                return;\n            }\n\n            Modal.init(modal).hide();\n        });\n    }\n\n    $.append(document.body, modal);\n\n    if ('onShow' in options) {\n        $.addEvent(modal, 'show.ui.modal', (e) => {\n            options.onShow(e);\n        });\n    }\n\n    if ('onShown' in options) {\n        $.addEvent(modal, 'shown.ui.modal', (e) => {\n            options.onShown(e);\n        });\n    }\n\n    if ('onHide' in options) {\n        $.addEvent(modal, 'hide.ui.modal', (e) => {\n            options.onHide(e);\n        });\n    }\n\n    if ('onHidden' in options) {\n        $.addEvent(modal, 'hidden.ui.modal', (e) => {\n            options.onHidden(e);\n        });\n    }\n\n    Modal.init(modal).show();\n\n    return modal;\n};\n","import $ from '@fr0st/query';\n\n/**\n * Check if the editor is empty and populate base markup.\n */\nexport function _checkEmpty() {\n    const html = $.getValue(this._node).trim();\n\n    if (html) {\n        return;\n    }\n\n    $.setHTML(this._editor, '<p><br></p>');\n};\n\n/**\n * Execute a command.\n * @param {string} command The command.\n * @param {Boolean|string} [value] The command argument.\n */\nexport function _execCommand(command, value) {\n    if ($.is(this._node, ':disabled')) {\n        return;\n    }\n\n    this._focusEditor();\n\n    document.execCommand('styleWithCSS', false, ['backColor', 'fontName', 'fontSize', 'foreColor'].includes(command));\n\n    if (['insertOrderedList', 'insertUnorderedList'].includes(command)) {\n        this._observe(false);\n        document.execCommand('formatBlock', false, 'p');\n        this._observe();\n    }\n\n    document.execCommand(command, false, value);\n};\n\n/**\n * Ensure the editor element has focus.\n */\nexport function _focusEditor() {\n    if ($.isSame(this._editor, document.activeElement) || $.hasDescendent(this._editor, document.activeElement)) {\n        return;\n    }\n\n    const selection = window.getSelection();\n\n    if (selection.anchorNode && $.hasDescendent(this._editor, selection.anchorNode)) {\n        return;\n    }\n\n    $.focus(this._editor);\n};\n\n/**\n * Refresh the popover at cursor.\n */\nexport function _refreshCursor() {\n    const selection = window.getSelection();\n    const baseNode = selection.baseNode;\n\n    if (!$.hasDescendent(this._editor, baseNode)) {\n        this._removePopover();\n        return;\n    }\n\n    const currentNode = $.is(baseNode, 'a') ?\n        baseNode :\n        $.closest(baseNode, 'a', this._editor).shift();\n\n    if (!currentNode) {\n        this._removePopover();\n        return;\n    }\n\n    this._refreshPopover(currentNode);\n};\n\n/**\n * Refresh the editor disabled.\n */\nexport function _refreshDisabled() {\n    if ($.is(this._node, ':disabled')) {\n        $.addClass(this._editor, this.constructor.classes.editorDisabled);\n        $.setStyle(this._editor, { opacity: .5 });\n        $.removeAttribute(this._editor, 'contenteditable');\n        $.setAttribute(this._editor, { 'aria-disabled': true });\n        $.setAttribute(this._source, { disabled: true });\n    } else {\n        $.removeClass(this._editor, this.constructor.classes.editorDisabled);\n        $.setStyle(this._editor, { opacity: '' });\n        $.setAttribute(this._editor, { contenteditable: true });\n        $.removeAttribute(this._editor, 'aria-disabled');\n        $.removeAttribute(this._source, 'disabled');\n    }\n};\n\n/**\n * Refresh the source line numbers.\n */\nexport function _refreshLineNumbers() {\n    if (!$.isVisible(this._sourceContainer)) {\n        return;\n    }\n\n    const lineNumbers = $.contents(this._lineNumbers);\n\n    const html = $.getValue(this._source);\n    const lines = html.split('\\n');\n\n    const test = $.create('div', {\n        style: {\n            width: $.width(this._source, { boxSize: $.CONTENT_BOX }),\n            padding: 0,\n            border: 0,\n            font: $.css(this._source, 'font'),\n            letterSpacing: $.css(this._source, 'letterSpacing'),\n            whiteSpace: $.css(this._source, 'whiteSpace'),\n            wordBreak: $.css(this._source, 'wordBreak'),\n            wordSpacing: $.css(this._source, 'wordSpacing'),\n            wordWrap: $.css(this._source, 'wordWrap'),\n        },\n    });\n\n    $.append(document.body, test);\n\n    for (const [i, line] of lines.entries()) {\n        let lineNumber;\n        if (i < lineNumbers.length) {\n            lineNumber = lineNumbers[i];\n        } else {\n            lineNumber = $.create('div', {\n                text: i + 1,\n            });\n            $.append(this._lineNumbers, lineNumber);\n        }\n\n        $.setText(test, line || ' ');\n\n        const { height } = $.rect(test);\n\n        $.setStyle(lineNumber, {\n            height: `${height}px`,\n        });\n    }\n\n    $.detach(test);\n\n    if (lineNumbers.length > lines.length) {\n        $.detach(lineNumbers.slice(lines.length));\n    }\n};\n\n/**\n * Refresh the toolbar.\n */\nexport function _refreshToolbar() {\n    this._focusEditor();\n\n    const isDisabled = $.is(this._node, ':disabled');\n    const isSource = $.isVisible(this._sourceContainer);\n\n    for (const { button, data, type } of this._buttons) {\n        if ('setContent' in data) {\n            const content = data.setContent.bind(this)();\n            $.setHTML(button, content);\n        }\n\n        let enabled = false;\n        if ('command' in data) {\n            enabled = 'value' in data ?\n                document.queryCommandValue(data.command) === data.value :\n                document.queryCommandState(data.command);\n        }\n\n        if (enabled) {\n            $.addClass(button, 'active');\n            $.setAttribute(button, { 'aria-pressed': true });\n        } else {\n            $.removeClass(button, 'active');\n            $.removeAttribute(button, 'aria-pressed');\n        }\n\n        if (\n            isDisabled ||\n            (isSource && !['source', 'fullScreen'].includes(type)) ||\n            ('disableCheck' in data && data.disableCheck.bind(this)())\n        ) {\n            $.addClass(button, 'disabled');\n            $.setAttribute(button, { 'aria-disabled': true });\n        } else {\n            $.removeClass(button, 'disabled');\n            $.removeAttribute(button, 'aria-disabled');\n        }\n    }\n};\n\n/**\n * Reset the drop text.\n */\nexport function _resetDropText() {\n    $.removeClass(this._dropText, this.constructor.classes.dropHover);\n    $.setText(this._dropText, this.constructor.lang.drop.dropHere);\n};\n\n/**\n * Show the drop target.\n */\nexport function _showDropTarget() {\n    if ($.is(this._node, ':disabled') || $.isVisible(this._sourceContainer)) {\n        return;\n    }\n\n    $.show(this._dropTarget);\n};\n\n/**\n * Show the editor.\n */\nexport function _showEditor() {\n    $.show(this._editorScroll);\n    $.hide(this._sourceOuter);\n};\n\n/**\n * Show the source.\n */\nexport function _showSource() {\n    $.show(this._sourceOuter);\n    $.setStyle(this._editorScroll, { display: 'none' }, null, { important: true });\n    $.hide(this._imgHighlight);\n\n    this._refreshLineNumbers();\n};\n\n/**\n * Update the input value.\n */\nexport function _updateValue() {\n    const html = $.getHTML(this._editor);\n\n    if (html === $.getValue(this._node)) {\n        return;\n    }\n\n    this._redoHistory = [];\n\n    const selectionData = this._getSelectionData();\n\n    this._addHistory({ html, selectionData });\n\n    $.setValue(this._node, html);\n    $.setValue(this._source, html);\n\n    $.triggerEvent(this._node, 'change.ui.editor');\n};\n","import $ from '@fr0st/query';\nimport { Tooltip } from '@fr0st/ui';\n\n/**\n * Render a color dropdown.\n * @param {HTMLElement} dropdown The dropdown.\n */\nexport function _colorDropdown(dropdown) {\n    const container = $.create('li', {\n        class: this.constructor.classes.colorContainerRow,\n    });\n\n    const col1 = $.create('div', {\n        class: this.constructor.classes.colorContainerColumn,\n    });\n\n    const col2 = $.create('div', {\n        class: this.constructor.classes.colorContainerColumn,\n    });\n\n    const foreLabel = $.create('small', {\n        text: this.constructor.lang.dropdowns.colorForeground,\n        class: this.constructor.classes.colorLabel,\n    });\n\n    const backLabel = $.create('small', {\n        text: this.constructor.lang.dropdowns.colorBackground,\n        class: this.constructor.classes.colorLabel,\n    });\n\n    $.append(col1, foreLabel);\n    $.append(col2, backLabel);\n\n    const foreDefaultContainer = $.create('div', {\n        class: this.constructor.classes.colorLabelContainer,\n    });\n    $.append(col1, foreDefaultContainer);\n\n    const backDefaultContainer = $.create('div', {\n        class: this.constructor.classes.colorLabelContainer,\n    });\n    $.append(col2, backDefaultContainer);\n\n    const foreDefault = $.create('button', {\n        text: this.constructor.lang.dropdowns.colorDefault,\n        class: this.constructor.classes.colorDefaultBtn,\n        attributes: {\n            type: 'button',\n        },\n    });\n    $.append(foreDefaultContainer, foreDefault);\n\n    this._setToolbarData(foreDefault, {\n        command: 'foreColor',\n        value: 'initial',\n    });\n\n    const backDefault = $.create('button', {\n        text: this.constructor.lang.dropdowns.colorTransparent,\n        class: this.constructor.classes.colorDefaultBtn,\n        attributes: {\n            type: 'button',\n        },\n    });\n    $.append(backDefaultContainer, backDefault);\n\n    this._setToolbarData(backDefault, {\n        command: 'backColor',\n        value: 'initial',\n    });\n\n    for (const colorRow of this.constructor.colors) {\n        const foreRow = $.create('div', {\n            class: this.constructor.classes.colorRow,\n        });\n        $.append(col1, foreRow);\n\n        const backRow = $.create('div', {\n            class: this.constructor.classes.colorRow,\n        });\n        $.append(col2, backRow);\n\n        for (const [colorName, color] of Object.entries(colorRow)) {\n            const foreLink = $.create('button', {\n                class: this.constructor.classes.color,\n                style: {\n                    backgroundColor: color,\n                },\n                attributes: {\n                    'data-ui-title': colorName,\n                    'type': 'button',\n                    'aria-label': colorName,\n                },\n            });\n            $.append(foreRow, foreLink);\n\n            Tooltip.init(foreLink, {\n                appendTo: document.body,\n                placement: 'bottom',\n            });\n\n            this._setToolbarData(foreLink, {\n                command: 'foreColor',\n                value: color,\n            });\n\n            const backLink = $.create('button', {\n                class: this.constructor.classes.color,\n                style: {\n                    backgroundColor: color,\n                },\n                attributes: {\n                    'data-ui-title': colorName,\n                    'type': 'button',\n                    'aria-label': colorName,\n                },\n            });\n            $.append(backRow, backLink);\n\n            UI.Tooltip.init(backLink, {\n                appendTo: document.body,\n                placement: 'bottom',\n            });\n\n            this._setToolbarData(backLink, {\n                command: 'backColor',\n                value: color,\n            });\n        }\n    }\n\n    $.append(container, col1);\n    $.append(container, col2);\n\n    $.setStyle(dropdown, { minWidth: '350px' });\n    $.append(dropdown, container);\n};\n\n/**\n * Render a font dropdown.\n * @param {HTMLElement} dropdown The dropdown.\n */\nexport function _fontDropdown(dropdown) {\n    const fonts = this._options.fonts.sort();\n\n    for (const font of fonts) {\n        const button = $.create('li', {\n            text: font,\n            class: this.constructor.classes.dropdownItem,\n            style: {\n                fontFamily: font,\n            },\n            attributes: {\n                'role': 'button',\n                'aria-label': font,\n            },\n        });\n\n        const data = {\n            command: 'fontName',\n            value: font,\n        };\n\n        this._buttons.push({ button, data });\n\n        this._setToolbarData(button, data);\n\n        $.append(dropdown, button);\n    }\n};\n\n/**\n * Render a font size dropdown.\n * @param {HTMLElement} dropdown The dropdown.\n */\nexport function _fontSizeDropdown(dropdown) {\n    const sizes = Object.values(this.constructor.fontSizes);\n\n    for (const size of sizes) {\n        const button = $.create('li', {\n            text: size,\n            class: this.constructor.classes.dropdownItem,\n            attributes: {\n                'role': 'button',\n                'aria-label': size,\n            },\n        });\n\n        const data = {\n            command: 'fontSize',\n            value: size,\n        };\n\n        this._buttons.push({ button, data });\n\n        this._setToolbarData(button, data);\n\n        $.append(dropdown, button);\n    }\n};\n\n/**\n * Render a style dropdown.\n * @param {HTMLElement} dropdown The dropdown.\n */\nexport function _styleDropdown(dropdown) {\n    for (const tag of this.constructor.styles) {\n        const button = $.create('li', {\n            class: this.constructor.classes.dropdownItem,\n            attributes: {\n                'role': 'button',\n                'aria-label': this.constructor.lang.styles[tag],\n            },\n        });\n\n        const content = $.create(tag, {\n            text: this.constructor.lang.styles[tag],\n            class: this.constructor.classes.styleContent,\n        });\n\n        $.append(button, content);\n\n        const data = {\n            command: 'formatBlock',\n            value: tag.toUpperCase(),\n        };\n\n        this._buttons.push({ button, data });\n\n        this._setToolbarData(button, data);\n\n        $.append(dropdown, button);\n    }\n};\n\n/**\n * Render a table dropdown.\n * @param {HTMLElement} dropdown The dropdown.\n */\nexport function _tableDropdown(dropdown) {\n    const container = $.create('li');\n\n    for (let i = 0; i < 10; i++) {\n        const row = $.create('div', {\n            class: this.constructor.classes.tableRow,\n        });\n        $.append(container, row);\n\n        for (let j = 0; j < 10; j++) {\n            const cell = $.create('div', {\n                class: this.constructor.classes.tableCell,\n            });\n            $.append(row, cell);\n\n            if (i > 4 || j > 4) {\n                $.hide(cell);\n            }\n\n            const link = $.create('a', {\n                class: this.constructor.classes.tableLink,\n                attributes: {\n                    href: '#',\n                },\n                dataset: {\n                    uiColumn: j,\n                    uiRow: i,\n                },\n            });\n            $.append(cell, link);\n        }\n    }\n\n    const info = $.create('span', {\n        class: this.constructor.classes.tableInfo,\n    });\n\n    $.addClass(dropdown, this.constructor.classes.tableDropdown);\n    $.append(dropdown, container);\n    $.append(dropdown, info);\n\n    $.addEventDelegate(container, 'click.ui.editor', 'a', (e) => {\n        const cols = $.getDataset(e.currentTarget, 'uiColumn');\n        const rows = $.getDataset(e.currentTarget, 'uiRow');\n\n        const container = $.create('div');\n\n        const table = $.create('table', {\n            class: this.constructor.classes.table,\n        });\n\n        const tbody = $.create('tbody');\n\n        for (let i = 0; i <= rows; i++) {\n            const tr = $.create('tr');\n\n            for (let j = 0; j <= cols; j++) {\n                const td = $.create('td', {\n                    html: '<br>',\n                });\n                $.append(tr, td);\n            }\n\n            $.append(tbody, tr);\n        }\n\n        $.append(table, tbody);\n\n        $.append(container, table);\n\n        const br = $.create('br');\n\n        $.append(container, br);\n\n        const html = $.getHTML(container);\n\n        this.insertHTML(html);\n    });\n\n    $.addEventDelegate(container, 'mouseover.ui.editor', 'a', (e) => {\n        const targetCol = $.getDataset(e.currentTarget, 'uiColumn');\n        const targetRow = $.getDataset(e.currentTarget, 'uiRow');\n\n        const colMin = Math.max(targetCol + 1, 4);\n        const rowMin = Math.max(targetRow + 1, 4);\n\n        const links = $.find('a', container);\n\n        for (const element of links) {\n            const col = $.getDataset(element, 'uiColumn');\n            const row = $.getDataset(element, 'uiRow');\n\n            if (col <= targetCol && row <= targetRow) {\n                $.addClass(element, this.constructor.classes.tableHover);\n            } else {\n                $.removeClass(element, this.constructor.classes.tableHover);\n            }\n\n            const parent = $.parent(element);\n            if (col <= colMin && row <= rowMin) {\n                $.show(parent);\n            } else {\n                $.hide(parent);\n            }\n        }\n\n        $.setText(info, `${targetCol + 1} x ${targetRow + 1}`);\n    });\n};\n","import $ from '@fr0st/query';\nimport { resetDragCount } from './../helpers.js';\nimport { getRange, selectNode } from './../selection.js';\n\n/**\n * Attach events for the Editor.\n */\nexport function _events() {\n    this._eventsToolbar();\n    this._eventsEditor();\n    this._eventsPopover();\n    this._eventsSource();\n    this._eventsDrop();\n\n    if (this._options.resizable) {\n        this._eventsResize();\n    }\n};\n\n/**\n * Attach drop events.\n */\nexport function _eventsDrop() {\n    $.addEventDelegate(this._editor, 'dragstart.ui.editor', 'img', (e) => {\n        e.preventDefault();\n    });\n\n    $.addEvent(this._dropTarget, 'dragenter.ui.editor', (_) => {\n        $.addClass(this._dropText, this.constructor.classes.dropHover);\n        $.setText(this._dropText, this.constructor.lang.drop.drop);\n        $.show(this._dropTarget);\n    });\n\n    $.addEvent(this._dropTarget, 'dragleave.ui.editor', (_) => {\n        this._resetDropText();\n    });\n\n    $.addEvent(this._dropTarget, 'dragover.ui.editor', (e) => {\n        e.preventDefault();\n    });\n\n    $.addEvent(this._dropTarget, 'drop.ui.editor', (e) => {\n        e.preventDefault();\n\n        resetDragCount();\n\n        this._resetDropText();\n        $.hide(this._dropTarget);\n\n        if (e.dataTransfer.files.length) {\n            this._options.imageUpload.bind(this)(e.dataTransfer.files);\n        } else {\n            const text = e.dataTransfer.getData('text');\n            this.insertText(text);\n        }\n    });\n};\n\n/**\n * Attach editor events.\n */\nexport function _eventsEditor() {\n    $.addEvent(this._editor, 'focus.ui.editor', (_) => {\n        $.triggerEvent(this._node, 'focus.ui.editor');\n    });\n\n    $.addEvent(this._editor, 'blur.ui.editor', (_) => {\n        $.triggerEvent(this._node, 'blur.ui.editor');\n    });\n\n    $.addEvent(this._editor, 'input.ui.editor', (e) => {\n        switch (e.inputType) {\n            case 'historyUndo':\n                if (!$.isSame(document.activeElement, this._editor)) {\n                    return;\n                }\n\n                this.undo();\n                break;\n            case 'historyRedo':\n                if (!$.isSame(document.activeElement, this._editor)) {\n                    return;\n                }\n\n                this.redo();\n                break;\n        }\n\n        if (e.inputType !== 'insertText') {\n            this._normalize();\n        }\n\n        this._updateValue();\n        this._checkEmpty();\n    });\n\n    $.addEvent(this._editor, 'keydown.ui.editor', (e) => {\n        if (this._options.keyDown) {\n            this._options.keyDown.bind(this)(e);\n        }\n\n        switch (e.code) {\n            case 'Backspace':\n                if ($.contents(this._editor).length <= 1 && $.getText(this._editor) === '') {\n                    e.preventDefault();\n                }\n\n                break;\n            case 'Delete':\n                const selection = window.getSelection();\n\n                if (\n                    selection.isCollapsed &&\n                    $.isSame(selection.anchorNode, selection.focusNode) &&\n                    $.getText(selection.anchorNode) === ''\n                ) {\n                    const nodes = [selection.anchorNode, ...$.parents(selection.anchorNode, null, this._editor)];\n\n                    if (nodes.every((node) => $.contents(node).length <= 1)) {\n                        const lastParent = nodes.pop();\n                        const nextParent = $.next(lastParent).shift();\n\n                        let formatElement = 'p';\n\n                        if (nextParent && $.is(nextParent, 'h1, h2, h3, h4, h5, h6, pre')) {\n                            formatElement = $.tagName(nextParent);\n                        }\n\n                        this._observe(false);\n                        this._execCommand('formatBlock', formatElement);\n                        this._observe();\n                    }\n                }\n\n                break;\n        }\n    });\n\n    $.addEvent(this._editorContainer, 'click.ui.editor', (_) => {\n        $.focus(this._editor);\n    });\n\n    $.addEventDelegate(this._editor, 'click.ui.editor', 'a, td, img', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this._refreshPopover(e.currentTarget, e);\n        this._refreshToolbar();\n    }, { capture: true });\n\n    const mutationHandler = () => {\n        this._normalize();\n        this._updateValue();\n        this._checkEmpty();\n    };\n\n    this._observer = new MutationObserver(mutationHandler);\n\n    let observeLevel = 0;\n    let pendingMutations = [];\n    this._observe = (observe = true) => {\n        if (observe) {\n            observeLevel++;\n\n            if (observeLevel === 1) {\n                this._observer.observe(this._editor, { attributes: true, childList: true, subtree: true });\n\n                if (pendingMutations.length) {\n                    mutationHandler(pendingMutations);\n                    pendingMutations = [];\n                }\n            }\n        } else {\n            observeLevel--;\n\n            if (observeLevel === 0) {\n                this._observer.disconnect();\n                pendingMutations = this._observer.takeRecords();\n            }\n        }\n    };\n\n    this._observe();\n};\n\n/**\n * Attach popover events.\n */\nexport function _eventsPopover() {\n    $.addEventDelegate(this._popover, 'click.ui.editor', '[data-ui-action]', (e) => {\n        const action = $.getDataset(e.currentTarget, 'uiAction');\n\n        if (!(action in this.constructor.popovers)) {\n            throw new Error(`Unknown action ${action}`);\n        }\n\n        e.preventDefault();\n\n        this.constructor.popovers[action].action.bind(this)(this._currentNode);\n        this._refreshPopover(this._currentNode);\n    });\n\n    const downEvent = (e) => {\n        if (!this._currentNode || !$.is(this._currentNode, 'img')) {\n            return false;\n        }\n\n        e.stopPropagation();\n\n        $.hide(this._imgCursor);\n        $.hide(this._popover);\n\n        this._observe(false);\n    };\n\n    const moveEvent = (e) => {\n        const imgRect = $.rect(this._currentNode, { offset: true });\n        const ratio = imgRect.width / imgRect.height;\n        const width = Math.max(\n            e.pageX - imgRect.x,\n            (e.pageY - imgRect.y) * ratio,\n            1,\n        );\n        $.setStyle(this._currentNode, { width: `${Math.round(width)}px` });\n        this._highlightImage(this._currentNode);\n    };\n\n    const upEvent = (_) => {\n        selectNode(this._currentNode);\n\n        const range = getRange();\n        range.collapse(false);\n\n        this._updateValue();\n        this._observe();\n    };\n\n    const dragEvent = $.mouseDragFactory(downEvent, moveEvent, upEvent);\n\n    $.addEvent(this._imgResize, 'mousedown.ui.editor', dragEvent);\n\n    $.addEvent(this._editorBody, 'scroll.ui.editor', (_) => {\n        this._removePopover();\n    });\n};\n\n/**\n * Attach resize events.\n */\nexport function _eventsResize() {\n    let resizeOffset = 0;\n\n    const downEvent = (e) => {\n        const barPosition = $.position(this._resizeBar, { offset: true });\n        resizeOffset = e.pageY - barPosition.y;\n\n        this._removePopover();\n    };\n\n    const moveEvent = (e) => {\n        const editorPosition = $.position(this._editorBody, { offset: true });\n\n        const height = Math.max(0, e.pageY - editorPosition.y - resizeOffset);\n        $.setStyle(this._editorBody, { height: `${height}px` });\n    };\n\n    const upEvent = (_) => {\n        resizeOffset = 0;\n    };\n\n    const dragEvent = $.mouseDragFactory(downEvent, moveEvent, upEvent);\n\n    $.addEvent(this._resizeBar, 'mousedown.ui.editor', dragEvent);\n};\n\n/**\n * Attach source events.\n */\nexport function _eventsSource() {\n    const refreshLineNumbersDebounced = $.debounce((_) => {\n        this._refreshLineNumbers();\n    });\n\n    $.addEvent(this._source, 'input.ui.editor', (_) => {\n        refreshLineNumbersDebounced();\n    });\n\n    $.addEvent(this._source, 'change.ui.editor', (_) => {\n        const html = $.getValue(this._source);\n\n        refreshLineNumbersDebounced();\n\n        this._addHistory({ html });\n\n        $.setHTML(this._editor, html);\n        $.setValue(this._node, html);\n        $.triggerEvent(this._node, 'change.ui.editor');\n    });\n\n    $.addEvent(this._source, 'keydown.ui.editor', (e) => {\n        if (e.key !== 'Tab') {\n            return;\n        }\n\n        e.preventDefault();\n\n        const start = $.getProperty(this._source, 'selectionStart');\n        const end = $.getProperty(this._source, 'selectionEnd');\n        const value = $.getValue(this._source);\n        const lines = value.split('\\n');\n\n        const startLine = value.substring(0, start).split('\\n').length - 1;\n        const endLine = value.substring(0, end).split('\\n').length - 1;\n\n        const tab = '\\t';\n\n        let newStart = start;\n        let newEnd = end;\n        let newValue;\n        if (e.shiftKey) {\n            for (const [i, line] of lines.entries()) {\n                if (i >= startLine && i <= endLine && line.startsWith(tab)) {\n                    lines[i] = line.substring(1);\n\n                    if (i === startLine) {\n                        newStart--;\n                    }\n\n                    if (i < endLine) {\n                        newEnd--;\n                    }\n                }\n            }\n\n            newValue = lines.join('\\n');\n        } else if (startLine !== endLine) {\n            for (const [i, line] of lines.entries()) {\n                if (i >= startLine && i <= endLine && (i < endLine || lines[i])) {\n                    lines[i] = tab + line;\n\n                    if (i < endLine) {\n                        newEnd++;\n                    }\n                }\n            }\n\n            newValue = lines.join('\\n');\n        } else {\n            newValue = value.substring(0, start) + '\\t' + value.substring(end);\n\n            newStart++;\n\n            if (start === end) {\n                newEnd++;\n            } else {\n                newEnd = newStart;\n            }\n        }\n\n        $.select(this._source);\n        document.execCommand('insertText', false, newValue);\n        this._source.setSelectionRange(newStart, newEnd);\n    });\n\n    $.addEvent(this._source, 'scroll.ui.editor', $.debounce((_) => {\n        const scrollY = $.getScrollY(this._source);\n        $.setStyle(this._lineNumbers, { marginTop: `${-scrollY}px` });\n    }));\n};\n\n/**\n * Attach toolbar events.\n */\nexport function _eventsToolbar() {\n    $.addEventDelegate(this._toolbar, 'click.ui.editor', '[data-ui-action]', (e) => {\n        const action = $.getDataset(e.currentTarget, 'uiAction');\n\n        if (!(action in this.constructor.plugins)) {\n            throw new Error(`Unknown action ${action}`);\n        }\n\n        e.preventDefault();\n\n        if (this._lastRange) {\n            const selection = window.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(this._lastRange);\n        }\n\n        this.constructor.plugins[action].action.bind(this)();\n    });\n\n    $.addEventDelegate(this._toolbar, 'click.ui.editor', '[data-ui-command]', (e) => {\n        const command = $.getDataset(e.currentTarget, 'uiCommand');\n\n        if (!(command in this)) {\n            throw new Error(`Unknown command ${command}`);\n        }\n\n        e.preventDefault();\n\n        if (this._lastRange) {\n            const selection = window.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(this._lastRange);\n        }\n\n        const value = $.getDataset(e.currentTarget, 'uiValue');\n        this[command](value);\n\n        this._refreshToolbar();\n    });\n};\n","import $ from '@fr0st/query';\nimport { Popper } from '@fr0st/ui';\n\n/**\n * Highlight an image.\n * @param {HTMLElement} image The image element.\n */\nexport function _highlightImage(image) {\n    $.hide(this._imgHighlight);\n    $.hide(this._imgCursor);\n\n    const imgRect = $.rect(image, { offset: true });\n    const editorPos = $.position(this._editor, { offset: true });\n    const scrollX = $.getScrollX(this._editorScroll);\n    const scrollY = $.getScrollY(this._editorScroll);\n    const imgX = Math.round(imgRect.x);\n    const imgY = Math.round(imgRect.y);\n    const imgWidth = Math.round(imgRect.width);\n    const imgHeight = Math.round(imgRect.height);\n\n    $.setStyle(this._imgHighlight, {\n        top: `${imgY - editorPos.y + scrollY - 2}px`,\n        left: `${imgX - editorPos.x + scrollX - 2}px`,\n        width: `${imgWidth + 2}px`,\n        height: `${imgHeight + 2}px`,\n    });\n\n    $.setText(this._imgSize, `${imgWidth}x${imgHeight}`);\n\n    if (imgWidth < 100 || imgHeight < 50) {\n        $.hide(this._imgSize);\n    } else {\n        $.show(this._imgSize);\n    }\n\n    $.show(this._imgHighlight);\n    $.show(this._imgCursor);\n};\n\n/**\n * Refresh the popover.\n * @param {HTMLElement} currentNode The current selected node.\n * @param {Event} [event] The current event.\n */\nexport function _refreshPopover(currentNode, event) {\n    if ($.isSame(currentNode, this._currentNode)) {\n        return;\n    }\n\n    this._removePopover();\n\n    this._currentNode = currentNode;\n\n    if (!this._currentNode) {\n        return;\n    }\n\n    const tagName = $.tagName(this._currentNode);\n\n    let reference = this._currentNode;\n    if (event && tagName === 'img') {\n        const editorPos = $.position(this._editor, { offset: true });\n        const scrollX = $.getScrollX(this._editorScroll);\n        const scrollY = $.getScrollY(this._editorScroll);\n        $.setStyle(this._imgCursor, {\n            top: `${event.pageY - editorPos.y + scrollY}px`,\n            left: `${event.pageX - editorPos.x + scrollX}px`,\n        });\n        reference = this._imgCursor;\n    }\n\n    this._popper = new Popper(\n        this._popover,\n        {\n            reference,\n            arrow: this._popoverArrow,\n            container: this._editor,\n            placement: 'bottom',\n            position: 'left',\n            minContact: 0,\n            noAttributes: true,\n        },\n    );\n\n    $.show(this._popover);\n\n    switch (tagName) {\n        case 'a':\n            this._renderPopoverItems(this._options.popovers.link);\n            break;\n        case 'img':\n            this._renderPopoverItems(this._options.popovers.image);\n            this._highlightImage(this._currentNode);\n            $.show(this._imgHighlight);\n            break;\n        case 'td':\n            this._renderPopoverItems(this._options.popovers.table);\n            break;\n    }\n\n    this._popper.update();\n};\n\n/**\n * Remove the popover.\n */\nexport function _removePopover() {\n    if (!this._currentNode) {\n        return;\n    }\n\n    $.hide(this._imgHighlight);\n    $.hide(this._imgCursor);\n    $.hide(this._popover);\n    $.empty(this._popoverBody);\n\n    this._popper.dispose();\n    this._popper = null;\n    this._currentNode = null;\n};\n","import $ from '@fr0st/query';\nimport { joinAdjacentNodes, normalizePhrasing, normalizeSpans, normalizeStyles } from './../normalize.js';\nimport { getRange, restoreSelection, saveSelection, selectNode } from './../selection.js';\n\n/**\n * Insert a (cloned) node into the editor.\n * @param {HTMLElement} node The node to insert.\n * @return {HTMLElement} The new node.\n */\nexport function _insertNode(node) {\n    this._focusEditor();\n\n    const range = getRange();\n    range.deleteContents();\n    range.insertNode(node);\n    range.collapse(false);\n\n    return node;\n};\n\n/**\n * Normalize the editor.\n */\nexport function _normalize() {\n    this._observe(false);\n\n    $.normalize(this._editor);\n\n    const markers = saveSelection();\n\n    normalizeStyles(this._editor);\n    normalizeSpans(this._editor);\n    normalizePhrasing(this._editor);\n    joinAdjacentNodes(this._editor, markers);\n\n    restoreSelection(markers);\n\n    $.normalize(this._editor);\n\n    this._observe();\n};\n\n/**\n * Update a table element.\n * @param {HTMLElement} td The td element.\n * @param {function} callback The callback.\n */\nexport function _updateTable(td, callback) {\n    const table = $.closest(td, 'table', this._editor).shift();\n\n    if (!table) {\n        return;\n    }\n\n    const tr = $.closest(td, 'tr', this._editor).shift();\n\n    callback(td, tr, table);\n\n    const range = selectNode(td);\n    range.collapse(true);\n};\n","import $ from '@fr0st/query';\nimport { Modal, generateId } from '@fr0st/ui';\nimport { getRange, selectNode, selectRange } from './../selection.js';\n\n/**\n * Remove the modal.\n */\nexport function _removeModal() {\n    if (!this._modal) {\n        return;\n    }\n\n    Modal.init(this._modal).dispose();\n    $.remove(this._modal);\n    this._modal = null;\n};\n\n/**\n * Show the image modal.\n */\nexport function _showImageModal() {\n    const container = $.create('div');\n\n    const { group: fileGroup, input: fileInput } = this.constructor._createFileInput({\n        id: generateId('editor-image-file'),\n        label: this.constructor.lang.modals.imageFile,\n        attributes: {\n            accept: 'image/*',\n            multiple: true,\n        },\n    });\n\n    const { group: urlGroup, input: urlInput } = this.constructor._createInput({\n        id: generateId('editor-image-url'),\n        label: this.constructor.lang.modals.imageUrl,\n    });\n\n    $.append(container, fileGroup);\n    $.append(container, urlGroup);\n\n    const originalRange = getRange();\n\n    this._focusEditor();\n\n    const range = getRange();\n    range.collapse();\n\n    this._modal = this.constructor._createModal({\n        title: this.constructor.lang.modals.insertImage,\n        content: container,\n        cancelText: this.constructor.lang.modals.cancel,\n        submitText: this.constructor.lang.modals.insertImage,\n        onSubmit: (_) => {\n            selectRange(range);\n\n            const files = $.getProperty(fileInput, 'files');\n            const src = $.getValue(urlInput);\n\n            if (files.length) {\n                this._options.imageUpload.bind(this)(files);\n            } else if (src) {\n                this.insertImage(src);\n            }\n        },\n        onShown: (_) => {\n            $.focus(fileInput);\n        },\n        onHidden: (_) => {\n            this._removeModal();\n            selectRange(originalRange);\n        },\n    });\n};\n\n/**\n * Show the link modal.\n * @param {HTMLElement} [link] The current link.\n */\nexport function _showLinkModal(link) {\n    const container = $.create('div');\n\n    const { group: textGroup, input: textInput } = this.constructor._createInput({\n        id: generateId('editor-link-text'),\n        label: this.constructor.lang.modals.linkText,\n    });\n\n    const { group: urlGroup, input: urlInput } = this.constructor._createInput({\n        id: generateId('editor-link-url'),\n        label: this.constructor.lang.modals.linkUrl,\n    });\n\n    const { group: newWindowGroup, input: newWindowInput } = this.constructor._createCheckbox({\n        id: generateId('editor-link-new-window'),\n        label: this.constructor.lang.modals.linkNewWindow,\n    });\n\n    if (link) {\n        const text = $.getText(link);\n        const href = $.getAttribute(link, 'href');\n        const newWindow = $.getAttribute(link, 'target');\n\n        $.setValue(textInput, text);\n        $.setValue(urlInput, href);\n\n        if (newWindow === '_blank') {\n            $.setProperty(newWindowInput, { checked: true });\n        }\n    }\n\n    let hasText = false;\n\n    $.addEvent(textInput, 'input.ui.editor', (_) => {\n        hasText = !!$.getValue(textInput);\n    });\n\n    $.addEvent(urlInput, 'input.ui.editor', (_) => {\n        if (hasText) {\n            return;\n        }\n\n        const url = $.getValue(urlInput);\n        $.setValue(textInput, url);\n    });\n\n    $.append(container, textGroup);\n    $.append(container, urlGroup);\n    $.append(container, newWindowGroup);\n\n    const originalRange = getRange();\n\n    let range;\n    if (link) {\n        range = selectNode(link);\n    } else {\n        this._focusEditor();\n        range = getRange();\n    }\n\n    this._modal = this.constructor._createModal({\n        title: this.constructor.lang.modals.insertLink,\n        content: container,\n        cancelText: this.constructor.lang.modals.cancel,\n        submitText: this.constructor.lang.modals.insertLink,\n        onSubmit: (_) => {\n            selectRange(range);\n\n            const text = $.getValue(textInput);\n            const href = $.getValue(urlInput);\n            const newWindow = $.is(newWindowInput, ':checked');\n\n            this.insertLink(href, text, newWindow);\n        },\n        onShown: (_) => {\n            $.focus(urlInput);\n        },\n        onHidden: (_) => {\n            this._removeModal();\n            selectRange(originalRange);\n        },\n    });\n};\n\n/**\n * Show the video modal.\n */\nexport function _showVideoModal() {\n    const container = $.create('div');\n\n    const { group: urlGroup, input: urlInput, invalidFeedback: urlInvalidFeedback } = this.constructor._createInput({\n        id: generateId('editor-video-url'),\n        label: this.constructor.lang.modals.videoUrl,\n    });\n\n    $.append(container, urlGroup);\n\n    const originalRange = getRange();\n\n    this._focusEditor();\n    const range = getRange();\n\n    this._modal = this.constructor._createModal({\n        title: this.constructor.lang.modals.insertVideo,\n        content: container,\n        cancelText: this.constructor.lang.modals.cancel,\n        submitText: this.constructor.lang.modals.insertVideo,\n        onSubmit: (_) => {\n            selectRange(range);\n\n            const url = $.getValue(urlInput);\n            const match = url.match(/youtube\\.com\\/watch\\?v=([\\w]+)/i);\n\n            if (!match) {\n                $.addClass(urlGroup, this.constructor.classes.formError);\n                $.setText(urlInvalidFeedback, this.constructor.lang.modals.videoUrlInvalid);\n                return false;\n            }\n\n            $.removeClass(urlGroup, this.constructor.classes.formError);\n\n            const id = match[1];\n            const video = $.create('iframe', {\n                attributes: {\n                    width: 560,\n                    height: 315,\n                    src: `https://www.youtube.com/embed/${id}`,\n                    frameborder: 0,\n                    allowfullscreen: true,\n                },\n            });\n\n            const html = $.getProperty(video, 'outerHTML');\n\n            this.insertHTML(html);\n        },\n        onShown: (_) => {\n            $.focus(urlInput);\n        },\n        onHidden: (_) => {\n            this._removeModal();\n            selectRange(originalRange);\n        },\n    });\n};\n","import $ from '@fr0st/query';\nimport { Tooltip } from '@fr0st/ui';\n\n/**\n * Render the editor.\n */\nexport function _render() {\n    this._container = $.create('div', {\n        class: this.constructor.classes.container,\n    });\n\n    this._renderToolbar();\n\n    this._editorBody = $.create('div', {\n        class: this.constructor.classes.editorBody,\n        style: {\n            height: this._options.height,\n        },\n    });\n\n    $.append(this._container, this._editorBody);\n\n    this._renderEditor();\n    this._renderSource();\n    this._renderPopover();\n    this._renderDrop();\n\n    if (this._options.resizable) {\n        this._renderResize();\n    }\n\n    // hide the input node\n    $.hide(this._node);\n    $.setAttribute(this._node, { tabindex: -1 });\n\n    $.insertBefore(this._container, this._node);\n};\n\n/**\n * Render a button\n * @param {object} data The button data.\n * @return {HTMLElement} The button.\n */\nexport function _renderButton(data) {\n    const button = $.create('button', {\n        class: this.constructor.classes.btn,\n    });\n\n    if (data.setTitle) {\n        data.title = data.setTitle.bind(this)();\n    }\n\n    if (data.title) {\n        $.setAttribute(button, {\n            'title': data.title,\n            'aria-label': data.title,\n        });\n\n        Tooltip.init(button, {\n            appendTo: document.body,\n            placement: 'bottom',\n        });\n    }\n\n    if ('content' in data) {\n        $.setHTML(button, data.content);\n    } else {\n        const content = $.parseHTML(this.constructor.icons[data.icon]);\n        $.addClass(content, this.constructor.classes.btnIcon);\n        $.append(button, content);\n    }\n\n    return button;\n};\n\n/**\n * Render the drop elements.\n */\nexport function _renderDrop() {\n    this._dropTarget = $.create('div', {\n        class: this.constructor.classes.dropTarget,\n    });\n\n    this._dropText = $.create('span', {\n        text: this.constructor.lang.drop.dropHere,\n        class: this.constructor.classes.dropText,\n    });\n\n    $.append(this._dropTarget, this._dropText);\n    $.hide(this._dropTarget);\n    $.append(this._container, this._dropTarget);\n};\n\n/**\n * Render the editor elements.\n */\nexport function _renderEditor() {\n    this._editorScroll = $.create('div', {\n        class: this.constructor.classes.editorScroll,\n    });\n\n    this._editorContainer = $.create('div', {\n        class: this.constructor.classes.editorContainer,\n    });\n\n    this._editor = $.create('div', {\n        class: this.constructor.classes.editor,\n        style: {\n            fontFamily: this._options.defaultFont,\n        },\n        attributes: {\n            'role': 'textbox',\n            'aria-multline': true,\n            'spellcheck': true,\n            'autocorrect': true,\n        },\n    });\n\n    this._imgHighlight = $.create('div', {\n        class: this.constructor.classes.imgHighlight,\n    });\n\n    this._imgCursor = $.create('div', {\n        class: this.constructor.classes.imgCursor,\n    });\n\n    this._imgSize = $.create('div', {\n        class: this.constructor.classes.imgSize,\n    });\n\n    this._imgResize = $.create('div', {\n        class: this.constructor.classes.imgResize,\n    });\n\n    $.hide(this._imgHighlight);\n\n    $.append(this._imgHighlight, this._imgSize);\n    $.append(this._imgHighlight, this._imgResize);\n    $.append(this._editorContainer, this._imgCursor);\n    $.append(this._editorContainer, this._imgHighlight);\n    $.append(this._editorContainer, this._editor);\n    $.append(this._editorScroll, this._editorContainer);\n    $.append(this._editorBody, this._editorScroll);\n};\n\n/**\n * Render the resize bar.\n */\nexport function _renderResize() {\n    this._resizeBar = $.create('div', {\n        class: this.constructor.classes.resizeBar,\n    });\n\n    for (let i = 0; i < 3; i++) {\n        const hr = $.create('hr');\n        $.append(this._resizeBar, hr);\n    }\n\n    $.append(this._container, this._resizeBar);\n};\n\n/**\n * Render the source elements.\n */\nexport function _renderSource() {\n    this._sourceOuter = $.create('div', {\n        class: this.constructor.classes.sourceOuter,\n    });\n\n    this._sourceContainer = $.create('div', {\n        class: this.constructor.classes.sourceContainer,\n    });\n\n    this._lineNumbers = $.create('div', {\n        class: this.constructor.classes.sourceLines,\n    });\n\n    this._sourceScroll = $.create('div', {\n        class: this.constructor.classes.sourceScroll,\n    });\n\n    this._source = $.create('textarea', {\n        class: this.constructor.classes.source,\n    });\n\n    $.hide(this._sourceOuter);\n\n    $.append(this._sourceScroll, this._source);\n    $.append(this._sourceContainer, this._lineNumbers);\n    $.append(this._sourceContainer, this._sourceScroll);\n    $.append(this._sourceOuter, this._sourceContainer);\n    $.append(this._editorBody, this._sourceOuter);\n};\n","import $ from '@fr0st/query';\n\n/**\n * Render the popover elements.\n */\nexport function _renderPopover() {\n    this._popover = $.create('div', {\n        class: this.constructor.classes.popover,\n        attributes: {\n            role: 'tooltip',\n        },\n    });\n\n    this._popoverArrow = $.create('div', {\n        class: this.constructor.classes.popoverArrow,\n    });\n\n    this._popoverBody = $.create('div', {\n        class: this.constructor.classes.popoverBody,\n    });\n\n    $.hide(this._popover);\n    $.append(this._popover, this._popoverArrow);\n    $.append(this._popover, this._popoverBody);\n    $.append(this._container, this._popover);\n};\n\n/**\n * Render a popover item.\n * @param {string} type The item type.\n * @param {HTMLElement} parent The parent element.\n */\nexport function _renderPopoverItem(type, parent) {\n    const data = this.constructor.popovers[type];\n\n    let node;\n    if (data.render) {\n        node = data.render.bind(this)(this._currentNode);\n    } else {\n        node = this._renderButton({\n            icon: type,\n            title: this.constructor.lang.popovers[type],\n            ...data,\n        });\n\n        $.setDataset(node, { uiAction: type });\n    }\n\n    $.append(parent, node);\n};\n\n/**\n * Render popover items.\n * @param {Array} items The items to render.\n */\nexport function _renderPopoverItems(items) {\n    for (const item of items) {\n        if ($._isString(item)) {\n            this._renderPopoverItem(item, this._popoverBody);\n        } else {\n            const node = $.create('div', {\n                class: this.constructor.classes.btnGroup,\n                attributes: {\n                    role: 'group',\n                },\n            });\n\n            for (const type of item) {\n                this._renderPopoverItem(type, node);\n            }\n\n            $.append(this._popoverBody, node);\n        }\n    }\n};\n","import $ from '@fr0st/query';\n\n/**\n * Render the toolbar.\n */\nexport function _renderToolbar() {\n    const header = $.create('div', {\n        class: this.constructor.classes.toolbar,\n    });\n\n    this._toolbar = $.create('div', {\n        class: this.constructor.classes.toolbarButtons,\n        attributes: {\n            role: 'toolbar',\n        },\n    });\n\n    for (const buttons of this._options.buttons) {\n        const buttonGroup = $.create('div', {\n            class: this.constructor.classes.btnGroup,\n        });\n\n        for (const type of buttons) {\n            this._renderToolbarButton(type, buttonGroup);\n        }\n\n        $.append(this._toolbar, buttonGroup);\n    }\n\n    $.append(header, this._toolbar);\n    $.append(this._container, header);\n};\n\n/**\n * Render a toolbar button.\n * @param {string} type The button type.\n * @param {HTMLElement} parent The parent element.\n */\nexport function _renderToolbarButton(type, parent) {\n    const data = this.constructor.plugins[type];\n\n    const button = this._renderButton({\n        icon: type,\n        title: this.constructor.lang.plugins[type],\n        ...data,\n    });\n\n    this._buttons.push({ button, data, type });\n\n    this._setToolbarData(button, data, type);\n\n    if ('dropdown' in data) {\n        this._renderToolbarDropdown(parent, button, data.dropdown);\n    } else {\n        $.append(parent, button);\n    }\n};\n\n/**\n * Render a toolbar dropdown.\n * @param {HTMLElement} buttonGroup The button group element.\n * @param {HTMLElement} button The button element.\n * @param {Array|function} dropdownContent The dropdown content.\n */\nexport function _renderToolbarDropdown(buttonGroup, button, dropdownContent) {\n    const dropGroup = $.create('div', {\n        class: this.constructor.classes.dropdownGroup,\n        attributes: {\n            role: 'group',\n        },\n    });\n\n    $.addClass(button, this.constructor.classes.dropdownToggle);\n    $.setDataset(button, { uiToggle: 'dropdown' });\n    $.setAttribute(button, {\n        'aria-has-popup': true,\n        'aria-expanded': false,\n    });\n    $.append(dropGroup, button);\n\n    const dropdown = $.create('ul', {\n        class: this.constructor.classes.dropdown,\n    });\n\n    if ($._isArray(dropdownContent)) {\n        $.addClass(dropdown, this.constructor.classes.dropdownButtons);\n\n        for (const dropdownItems of dropdownContent) {\n            const subDropGroup = $.create('div', {\n                class: this.constructor.classes.btnGroup,\n                attributes: {\n                    role: 'group',\n                },\n            });\n\n            for (const type of dropdownItems) {\n                this._renderToolbarButton(type, subDropGroup);\n            }\n\n            $.append(dropdown, subDropGroup);\n        }\n    } else if ($._isFunction(dropdownContent)) {\n        dropdownContent.bind(this)(dropdown);\n    }\n\n    $.append(dropGroup, dropdown);\n    $.append(buttonGroup, dropGroup);\n};\n\n/**\n * Set data for a toolbar action.\n * @param {HTMLElement} node The action node.\n * @param {object} data The data to set.\n * @param {string} [type] The action type.\n */\nexport function _setToolbarData(node, data, type) {\n    if (data.command) {\n        $.setDataset(node, { uiCommand: data.command });\n\n        if (data.value) {\n            $.setDataset(node, { uiValue: data.value });\n        }\n    } else if (data.action && type) {\n        $.setDataset(node, { uiAction: type });\n    }\n};\n"],"mappings":"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"}